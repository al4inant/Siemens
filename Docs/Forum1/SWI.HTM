<html>
<head>
<META HTTP-EQUIV='Content-type' CONTENT='text/html; charset=windows-1251'>
<link rel='stylesheet' href='/tforum.css'>
<style><!--
a:link {color: #35766C; text-decoration: none;}
a:visited {color: #666666; text-decoration: none;}
a:active {color: #AF2B11; text-decoration:none;}
a:hover   {color: #AF2B11; text-decoration: none;}
-->
</style>
<style><!--
.quote {
font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 9px; color: #000000; line-height: 125%;
background-color: #FFFFFF; border: #669933; border-style: solid;
	border-left-width: 1px; border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px
}
-->
</style>
<title>swi</title><SCRIPT language='JavaScript' src='/bv.js'></SCRIPT><script language='JavaScript' type='text/javascript'>            function selectAll(elementId) {                var element = document.getElementById(elementId);                if ( document.selection ) {                    var range = document.body.createTextRange();                    range.moveToElementText(element);                    range.select();                }                if ( window.getSelection ) {                    var range = document.createRange();                    range.selectNodeContents(element);                    var blockSelection = window.getSelection();                    blockSelection.removeAllRanges();                    blockSelection.addRange(range);                }            }            function resizeLayer(layerId, newHeight) {                var myLayer = document.getElementById(layerId);                myLayer.style.height = newHeight + 'px';            }            function codeDivStart(msgID) {		msgID=10001;                var randomId = Math.floor(Math.random() * msgID);                var imgSrc = 'images/';                document.write('<div class="codetitle"><TABLE BORDER=0 cellpadding=0><tr><td width=100%><b>Код:</b>&nbsp;<img src="' + imgSrc + 'minCode.gif" width="16" height="14" title="Минимизировать" alt="Минимизировать" onclick="resizeLayer(' + randomId + ', 90)" onmouseover="this.style.cursor = \'pointer\'" /><img src="' + imgSrc + 'midCode.gif" width="16" height="14" title="Оптимальный размер" alt="Оптимальный размер" onclick="resizeLayer(' + randomId + ', 250)" onmouseover="this.style.cursor = \'pointer\'" /><img src="' + imgSrc + 'maxCode.gif" width="16" height="14" title="Максимизировать" alt="Максимизировать" onclick="resizeLayer(' + randomId + ', 500)" onmouseover="this.style.cursor = \'pointer\'" /></td><td><img src="' + imgSrc + 'minCode.gif" width="16" height="14" title="Минимизировать" alt="Минимизировать" onclick="resizeLayer(' + randomId + ', 90)" onmouseover="this.style.cursor = \'pointer\'" /><img src="' + imgSrc + 'midCode.gif" width="16" height="14" title="Оптимальный размер" alt="Оптимальный размер" onclick="resizeLayer(' + randomId + ', 250)" onmouseover="this.style.cursor = \'pointer\'" /><img src="' + imgSrc + 'maxCode.gif" width="16" height="14" title="Максимизировать" alt="Максимизировать" onclick="resizeLayer(' + randomId + ', 500)" onmouseover="this.style.cursor = \'pointer\'" /></td></tr></table></div><div class="codediv" id="' + randomId + '">');            } </script></head><body bgcolor='#FFFFFF' text='#000000' link='#35766C' vlink='#666666' alink='#AF2B11' leftmargin=0 topmargin=0 marginwidth=0 marginheight=0><table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr>
</table>
<table width=100% cellpadding=0 cellspacing=0 border=0><tr>
<td valign=bottom><a href="http://www.siemens-club.org/"><img src="/images/logo.gif" width=252 height=60 border=0 alt="Siemens - клуб"></a><br><img src="/images/div3.gif" width=300 height=1 alt=""><br>
&nbsp;<a href="http://forum.siemens-club.org/">SC-форум</a> : <a href="http://forum.siemens-club.org/viewboard.php?BoardID=37">Технический шпионаж. Сименс изнутри. </a> : swi
</td>
<td>
<script type='text/javascript'><!--
google_ad_client = 'pub-5782312129702219';
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = '468x60_as';
google_ad_type = 'text';
google_ad_channel ='';
google_color_link = '35766C';
google_color_text = '666666';
google_color_url = '000000';
google_color_border = '669933';
google_color_bg = 'EBF0DE';
//--></script>
<script type='text/javascript'
 src='http://pagead2.googlesyndication.com/pagead/show_ads.js'>
</script>
</td>
</tr>
</table>
<table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#666666"><td align=left valign=top><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
                <table width=100% border=0 cellspacing=0 cellpadding=4>
                        <tr valign=top> 
<!--                        <td align=left width=180 nowrap bgcolor=#D6DEBC><b><font color=#000000>Автор</font></b></td> -->
                <td align=left width=100% bgcolor=#D6DEBC><b><font color=#000000>Сообщение</font></b></td>
                        </tr>
                </table></td></tr>
        </table>

 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=431974></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 07:39 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#431974'>swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        угу только вот ходят тут слухи что с swi все не так просто... переключает она режим супервизора...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432011></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 09:29 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432011'>Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Народ, нефиг выдумывать. В телефоне используются только SWI от 0 до 3. Всего их может быть при вызове из ARM 0xFFFFFF, при вызове из тумбы 0xFF. IAR вообще в этом отношении рулит. Там делается так:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
...<br>
////////////File//////////////////<br>
#pragma swi_number=0x0010<br>
__swi int fopen(const char * cFileName, unsigned int iFileFlags, unsigned int iFileMode, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0011<br>
__swi int fread(int FileHandler, void *cBuffer, int iByteCount, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0012<br>
__swi int fwrite(int FileHandler, const char * cBuffer, int iByteCount, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0013<br>
__swi int fclose(int FileHandler, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0014<br>
__swi int fflush(int FileHandler, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0015<br>
__swi unsigned int lseek(int FileHandler, unsigned int offset, unsigned int origin, int *ErrorNumber, int *ErrorNumber2);<br>
...<br>
</div></div><br>
Генерит то что надо ;)<br>
<br>
Но в связи с супервизором, нужно делать так:<br>
<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
Обработка SWI:<br>
Сохраняем регистры<br>
Сохраняем LR в пользовательский стек<br>
Если наше исключение, берем по таблице адрес функции (по номеру SWI) и заносим его в LR.<br>
Восстанавливаем регистры (кроме LR)<br>
Делаем возврат<br>
</div></div><br>
<br>
Т.к. при возврате в LR лежит адрес вызываемой функции, а в стеке - адрес после SWI, то это будет эквивалентно прямому вызову функции.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432015></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 09:31 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432015'>Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Сохраняем LR в пользовательский стек</td></tr></table>ты его где возьмешь? стек уже переключился?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432026></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 09:56 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432026'>Re: Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Сохраняем LR в пользовательский стек</td></tr></table>ты его где возьмешь? стек уже переключился?</td></tr></table>
<br>
Не. То я пурги нагнал. Все время про LR забываю. Короче примерный код, взят с CX75sw23<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
RAM:00000008&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SoftBreak&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; DATA XREF: sub_A087CD28+128o<br>
RAM:00000008&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; sub_A09B4568+5Co ...<br>
RAM:00000008 18 F0 9F E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; PC, =sub_108<br>
<br>
RAM:00000108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; CODE XREF: RAM:SoftBreakj<br>
RAM:00000108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; DataAbort:VectFRQj ...<br>
RAM:00000108 A0 D0 9F E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; SP, =unk_81424<br>
RAM:00000108&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; End of function sub_108<br>
RAM:00000108<br>
RAM:0000010C<br>
RAM:0000010C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; --------------- S U B R O U T I N E ---------------------------------------<br>
RAM:0000010C<br>
RAM:0000010C<br>
RAM:0000010C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_10C<br>
RAM:0000010C 0F 40 2D E9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STMFD&nbsp;&nbsp; SP!, {R0-R3,LR}<br>
RAM:00000110 00 00 4F E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MRS&nbsp;&nbsp;&nbsp;&nbsp; R0, SPSR<br>
RAM:00000114 01 00 2D E9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STMFD&nbsp;&nbsp; SP!, {R0}<br>
RAM:00000118 20 00 10 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TST&nbsp;&nbsp;&nbsp;&nbsp; R0, #0x20<br>
RAM:0000011C B2 00 5E 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDRNEH&nbsp;&nbsp;R0, [LR,#-2]<br>
RAM:00000120 FF 0C C0 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BICNE&nbsp;&nbsp; R0, R0, #0xFF00<br>
RAM:00000124 04 00 1E 05&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDREQ&nbsp;&nbsp; R0, [LR,#-4]<br>
;Вот эту комманду прийдется пристрелить<br>
;Точнее заменить операнд на 0xFFFFFF или сколько надо<br>
RAM:00000128 FF 04 C0 03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BICEQ&nbsp;&nbsp; R0, R0, #0xFF000000<br>
RAM:0000012C 03 00 50 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, #3<br>
;Это case 0-3<br>
RAM:00000130 00 F1 9F 97&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDRLS&nbsp;&nbsp; PC, [PC,R0,LSL#2]<br>
;Это default, врезаемся на него<br>
RAM:00000134 1A 00 00 EA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loc_1A4<br>
тут будет какой-то переход<br>
RAM:00000134&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; ---------------------------------------------------------------------------<br>
RAM:00000138 48 01 00 00 off_138&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_148<br>
RAM:0000013C 58 01 00 00 off_13C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_158&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; CODE XREF: sub_A0628900j<br>
RAM:00000140 68 01 00 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_168<br>
RAM:00000144 7C 01 00 00 off_144&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_17C<br>
RAM:00000148&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; ---------------------------------------------------------------------------<br>
<br>
;Это возврат<br>
RAM:000001A4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loc_1A4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; CODE XREF: sub_10C+28j<br>
RAM:000001A4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; sub_10C+48j ...<br>
RAM:000001A4 01 00 BD E8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDMFD&nbsp;&nbsp; SP!, {R0}<br>
RAM:000001A8 00 F0 69 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MSR&nbsp;&nbsp;&nbsp;&nbsp; SPSR_cf, R0<br>
RAM:000001AC 0F 80 FD E8&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDMFD&nbsp;&nbsp; SP!, {R0-R3,PC}^<br>
<br>
Наш код:<br>
;делаем чего-то для получения R0=FuncTable[R0];<br>
....<br>
;Теперь в R0 - адрес процедуры<br>
;Заметьте, что LR=[SP+0x14]<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;R0,[SP,#0x14]&nbsp;&nbsp; ; Подмена адреса, который пойдет в PC, а в LR - адрес возврата так и остался<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; b&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;loc_1A4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; С пляжа...<br>
</div></div><br>
<br>
Вроде так.<br>
<br>
Еще наверное придется проверить на предмет ARM/THUMB откуда и куда. Хотя я бы забил на тумбу.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432030></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 10:02 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432030'>Re: Re: Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Вроде так.</td></tr></table>что-то типа того...<br>
извращены млин... мало им таблицы...<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Еще наверное придется проверить на предмет ARM/THUMB откуда и куда. Хотя я бы забил на тумбу.</td></tr></table>чет+чет=чет нечет+чет=нечет... эт я к тому что сколько бы адрес не двигал он состояния не меняет...<br>
<br>
где лежит это процедурина до того как в раму попадает? или патчить в раме бум?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432034></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 10:30 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432034'>Re: Re: Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b><div align="left"><script type="text/javascript">codeDivStart(66671)</script>RAM:00000124 04 00 1E 05&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDREQ&nbsp;&nbsp; R0, [LR,#-4]<br>
;Вот эту комманду прийдется пристрелить<br>
;Точнее заменить операнд на 0xFFFFFF или сколько надо<br>
RAM:00000128 FF 04 C0 03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BICEQ&nbsp;&nbsp; R0, R0, #0xFF000000</div></div>Еще наверное придется проверить на предмет ARM/THUMB откуда и куда. Хотя я бы забил на тумбу.</td></tr></table>
Это ты раму патчить собираешься ?<br>
А Тумба - нужна, нельзя на нее забивать...<br>
<br>
В текущей реализации сви-хукера я патчу СВИ3 как только она начинает работать по адресу 0xA...<br>
А обработчик прерываний живет по адресам 0х0...<br>
<a href="http://avkiev.kiev.ua/Siemens/Soft/swi3.txt" target=_blank>Так обстоят дела на S75v32</a>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432039></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 10:49 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432039'>Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Да вы что, вот копия в ром:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
CODE1:A0092BBC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_A0092BBC<br>
CODE1:A0092BBC 0F 40 2D E9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STMFD&nbsp;&nbsp; SP!, {R0-R3,LR}<br>
CODE1:A0092BC0 00 00 4F E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MRS&nbsp;&nbsp;&nbsp;&nbsp; R0, SPSR<br>
CODE1:A0092BC4 01 00 2D E9&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STMFD&nbsp;&nbsp; SP!, {R0}<br>
CODE1:A0092BC8 20 00 10 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TST&nbsp;&nbsp;&nbsp;&nbsp; R0, #0x20<br>
CODE1:A0092BCC B2 00 5E 11&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDRNEH&nbsp;&nbsp;R0, [LR,#-2]<br>
CODE1:A0092BD0 FF 0C C0 13&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BICNE&nbsp;&nbsp; R0, R0, #0xFF00<br>
CODE1:A0092BD4 04 00 1E 05&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDREQ&nbsp;&nbsp; R0, [LR,#-4]<br>
CODE1:A0092BD8 FF 04 C0 03&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BICEQ&nbsp;&nbsp; R0, R0, #0xFF000000<br>
CODE1:A0092BDC 03 00 50 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, #3<br>
CODE1:A0092BE0 00 F1 9F 97&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDRLS&nbsp;&nbsp; PC, [PC,R0,LSL#2]<br>
CODE1:A0092BE4 1A 00 00 EA&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loc_A0092C54<br>
CODE1:A0092BE4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; ---------------------------------------------------------------------------<br>
CODE1:A0092BE8 48 01 00 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_148<br>
CODE1:A0092BEC 58 01 00 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_158<br>
CODE1:A0092BF0 68 01 00 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_168<br>
CODE1:A0092BF4 7C 01 00 00&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; DCD loc_17C<br>
<br>
...etc<br>
<br>
</div></div><br>
<br>
Про проверку ARM/THUMB я имел в виду вот что: при возврате в LR всегда четный адрес. Режим восстанавливается из CPSR, соответственно надобно это проверить. Но повторюсь, я бы забил на тумбу. Пусть мне фанаты тумбы ;)расскажут, нафига она нужна ;)<br>
<br>
Это ведь для елфов делается...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432061></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 12:08 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432061'>Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Да вы что, вот копия в ром:</td></tr></table>
Упс, все оказалось так просто, спасибо ...<br>
<strike>Чур, SWI 0xAB - мое </strike>;)<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Но повторюсь, я бы забил на тумбу. Пусть мне фанаты тумбы ;)расскажут, нафига она нужна ;)<br>
Это ведь для елфов делается...</td></tr></table>
Это делается для всех - и для тумбы и для арма.<br>
Если делать - то делать хорошо, универсально.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432066></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 12:53 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432066'>Re: Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b><br>
Упс, все оказалось так просто, спасибо ...<br>
Чур, SWI 0xAB - мое ;)<br>
</td></tr></table>
<br>
Ну а смысл? Может ты внимание не обратил, я писал<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
////////////File//////////////////<br>
#pragma swi_number=0x0010<br>
__swi int fopen(const char * cFileName, unsigned int iFileFlags, unsigned int iFileMode, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0011<br>
__swi int fread(int FileHandler, void *cBuffer, int iByteCount, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0012<br>
__swi int fwrite(int FileHandler, const char * cBuffer, int iByteCount, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0013<br>
__swi int fclose(int FileHandler, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0014<br>
__swi int fflush(int FileHandler, int *ErrorNumber);<br>
<br>
#pragma swi_number=0x0015<br>
__swi unsigned int lseek(int FileHandler, unsigned int offset, unsigned int origin, int *ErrorNumber, int *ErrorNumber2);<br>
</div></div><br>
<br>
Сравниваем с library.vkp<br>
<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
050: 004F3847,0xA07CBB08&nbsp;&nbsp; ; f010: fopen<br>
058: 004F3847,0xA07CBB48&nbsp;&nbsp; ; f011: fread<br>
060: 004F3847,0xA07CBC30&nbsp;&nbsp; ; f012: fwrite<br>
068: 004F3847,0xA07CBA5C&nbsp;&nbsp; ; f013: fclose<br>
070: 004F3847,0xA07CBA8C&nbsp;&nbsp; ; f014: fflush<br>
078: 004F3847,0xA07CBABC&nbsp;&nbsp; ; f015: lseek<br>
</div></div><br>
<br>
Забивай себе f171 - и все ;)<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Это делается для всех - и для тумбы и для арма.<br>
Если делать - то делать хорошо, универсально.</td></tr></table>
<br>
Ну я не готов прямо сходу забабахать универсалочку. Хотя там половина либы в тумбе... Тем более что, шепну по-секрету, 256 функций не хватит ;) Как их из тумбы звать?<br>
<br>
Ладно, писать надо... И внимательно даташиты читать на проц...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432068></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;23.05.2006 в 13:10 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432068'>Re: Re: Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>#pragma swi_number=0x0010<br>
__swi int fopen(const char * cFileName, unsigned int iFileFlags, unsigned int iFileMode, int *ErrorNumber);<br>
...<br>
050: 004F3847,0xA07CBB08   ; f010: fopen<br>
</td></tr></table>
То есть ты предлагаешь для вызова функции номер N использовать SWI N ?<br>
А как вызвать функции 0-4 ?<br>
А как быть на тумбе с расширением Библы ?<br>
Не лучше ли заюзать один конкретный СВИ и передавать ему параметр словом (полусловом) после СВИ ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432161></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 03:08 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432161'>Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        ну што? сколько копий сломали пока меня небыло?<br>
<br>
я конечно могу предложить вам вариант который устроит обоих, но я против него...<br>
из тумбы используеться один swi и следующее полуслово за ним... из арма используються все swi старше 255...<br>
первые 4 функции либы просто переместить... можно прямо в обработчике...<br>
<br>
а саму либу нужно пересобирать под арм и расширять... она уже на половину заполнена, другую половину я думаю съест csm... а нам понадобится...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432162></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 03:12 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432162'>Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        а поповоду юзверьского стека... точно он недоступен из супервизора?.. имхо должен быть... эх придется видимо всеже доку почитать ))))
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432169></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 05:03 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432169'>Re: Re: Re: Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b><br>
То есть ты предлагаешь для вызова функции номер N использовать SWI N ?<br>
</td></tr></table>
Безусловно.<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><br>
А как вызвать функции 0-4 ?<br>
</td></tr></table>
Да выкинуть их!<br>
(чи не функции:<br>
000: 004F3847,0xA07D8DC7   ; f000: GetDateTime<br>
008: 004F3847,0xA020845B   ; f001: GetWeek<br>
010: 004F3847,0xA02BF4AD   ; f002: GetProfile<br>
018: 004F3847,0xA02BF35B   ; f003: SetProfile<br>
), или переместить на другое место, или начать с 4.<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><br>
А как быть на тумбе с расширением Библы ?<br>
</td></tr></table>
Забить на расширение в тумбе.<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><br>
Не лучше ли заюзать один конкретный СВИ и передавать ему параметр словом (полусловом) после СВИ ?<br>
</td></tr></table>
Если бы можно было такое в C официально сгенерить, то да, а так нормально можно только SWI N сделать.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432184></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 06:26 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432184'>Re: Re: Re: Re: Re: Re: МП</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>или переместить на другое место, или начать с 4.</td></tr></table>
SWI 4 существует на S75.<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Забить на расширение в тумбе</td></tr></table>
Тумбу попрошу не обижать ! ;)<br>
<br>
Подведем некоторые итоги:<br>
1. Библовые функции вызываем так: SWI N<br>
2. В Библиотеке функции 0-4 - дублируем. К примеру на 180-184.<br>
3. В библе резервируем функцию (к примеру-199). Вызов СВИ 199 влечет за собой вызов библиотечной функции, чей номер зашит в полуслове после СВИ. Это пока не надо, понадобится при расширении Библиотеки.<br>
<br>
Вроде нормально ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432186></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 06:37 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432186'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        эм... предлагаю оставить 0-255 для тумбы и может быть еще чего...<br>
начать с 256 для арма...<br>
<br>
либу нужно расширять однозначно... и имхо пересобирать под арм...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432188></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 06:41 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432188'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        давай те уж чтобы никому небыло обидно старую либу оставим как есть и swi от 5 до 255 отдадим ей... и там ченить зарезервируем для дерганья новой либы...<br>
а новую начнем с 256 и на арме...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432189></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 06:42 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432189'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        при всем при этом предлагаю положить по адресам 0xA8000000 начало либы, и буфер МП... дальше разделить кому сколько надо или просто выдать по указателю каждому... хотя я бы предпочел область все же...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432203></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 07:52 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432203'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>при всем при этом предлагаю положить по адресам 0xA8000000 начало либы, и буфер МП... дальше разделить кому сколько надо или просто выдать по указателю каждому... хотя я бы предпочел область все же...</td></tr></table>
<br>
Ага, масло масляное ;) Буфер МП еще куда не шло, а вот либу? Нах? Если договорились через SWI?<br>
<br>
Теперь основной вопрос. Если делать так как я писал (с подменой адреса в стеке) вот что может быть:<br>
<br>
1. Случай вызова ARM из ARM - тривиально ;)<br>
2. Случай вызова ARM->THUMB - в стеке будет приготовлен адрес func+1. В задаче спрашивается, что произойдет после выполнения LDMFD SP!, {R0-R3,PC}^ - т.к. в регистре CPSR режим ARM, а адрес в THUMB, произойдет ли корректный переход?<br>
3. Случай вызова THUMB->THUMB - в стеке будет приготовлен адрес func+1 (см. пункт 2), а вот что будет в LR? Судя по обработчику (там где код SWI эксгумируется), младший бит будет _СБРОШЕН_ - значит надо его поднять, если пришли из тумбы, чтобы потом функция вернулась в правильный режим.<br>
4. Случай вызова THUMB->ARM - опять же проблема с LR и с LDMFD.<br>
<br>
Скажем так, проблема с волшебным LDMFD заключается вот в чем - кто победит? Толи бит режима в CPSR толи бит 0 в стеке (то, что пойдет в PC). Опять-же, судя по обработчику, победит бит режима - т.к. видимо в LR всегда четное значение...<br>
<br>
Вообщем, с вариантами 2-4 геморрой может быть немалый...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432205></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 08:02 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432205'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Ага, масло масляное ;) Буфер МП еще куда не шло, а вот либу? Нах? Если договорились через SWI?</td></tr></table>именно, чтоб было... не уверен я в swi на 100%... вот так вот... пригодиться на всякий... для тех кто не сможет swi родить ;) да и мало ли зачем...<br>
<br>
посмотрел я на либу она ровно 256 функци... вообщем так и предлагаю порешить...<br>
Либа в1 в том виде в каком сейчас существует + перенос + пара резервных + собсна обработчик...<br>
Либа в2 старше 255, вот тут я только думаю просто указатели на функции или как первая но для АРМа?<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Вообщем, с вариантами 2-4 геморрой может быть немалый...</td></tr></table>думайте Ватсон и эксперементируйте... а исчо поглядите где юзверьский стек в режима супервизора... ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432217></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 08:39 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432217'>Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b><br>
Либа в2 старше 255, вот тут я только думаю просто указатели на функции или как первая но для АРМа?</td></tr></table>
Наверное, лучше LDR R12,=adr BX R12<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Вообщем, с вариантами 2-4 геморрой может быть немалый...</td></tr></table>думайте Ватсон и эксперементируйте... а исчо поглядите где юзверьский стек в режима супервизора... ;)</td></tr></table>
<br>
Ну можно получить его например:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
 STMFD SP!,{SP}^ ; Обрати внимание на ^ - это значит взять юзер-регистры<br>
 LDMFD SP!,{R0}<br>
</div></div><br>
<br>
Только нафига он нужен? Ведь нужный адрес (возврата) есть прямо в LR?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432220></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 08:50 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432220'>Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Наверное, лучше LDR R12,=adr BX R12</td></tr></table>чем не устраивает ldr pc,=adr??<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Только нафига он нужен? Ведь нужный адрес (возврата) есть прямо в LR?</td></tr></table>потому как мне первый более симпатичен вариант, т.е. возвращаца по рету в дергаемую функцию а из нее уже в обратно...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432225></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 09:36 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432225'>Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Наверное, лучше LDR R12,=adr BX R12</td></tr></table>чем не устраивает ldr pc,=adr??<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Только нафига он нужен? Ведь нужный адрес (возврата) есть прямо в LR?</td></tr></table>потому как мне первый более симпатичен вариант, т.е. возвращаца по рету в дергаемую функцию а из нее уже в обратно...</td></tr></table>
<br>
Вова, покури вечером все че я написал. Я и планирую "т.е. возвращаца по рету в дергаемую функцию а из нее уже в обратно...".
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432226></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 09:37 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432226'>Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>чем не устраивает ldr pc,=adr??</td></tr></table>
По такой схеме можно выполнить только армовые функции.<br>
<br>
Вариант с R12 - слишком громоздкий... И некрасивый (3 слова)...<br>
<br>
Имхо,<br>
- или голую таблицу адресов (1 слово на функцию)<br>
- или предварять их тумбовым LDR R7, [...]; BX R7 (для совместимости) - 2 слова на функцию. Все равно из арма все будет через СВИ вызываться минуя эту приставку
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432228></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 09:51 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432228'>Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b><br>
Вариант с R12 - слишком громоздкий... И некрасивый (3 слова)...<br>
<br>
Имхо,<br>
- или голую таблицу адресов (1 слово на функцию)<br>
- или предварять их тумбовым LDR R7, [...]; BX R7 (для совместимости) - 2 слова на функцию. Все равно из арма все будет через СВИ вызываться минуя эту приставку</td></tr></table>
<br>
Про R7 забываем сразу ;)<br>
<br>
Я пока читаю даташиты и думаю. Пока тугенько ;) Будем пробовать делать таблицу адресов, если в тумбу, то +1.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432231></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 10:02 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432231'>Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>- или предварять их тумбовым LDR R7, [...]; BX R7 (для совместимости) - 2 слова на функцию. Все равно из арма все будет через СВИ вызываться минуя эту приставку</td></tr></table>
Про R7 забываем сразу ;)</td></tr></table>
Почему ?<br>
Из арма никто не будет юзать эту приставку, будут обращаться с помощью СВИ непосредственно к адресу после приставки.<br>
А из тумбы можно будет вызвать функции расширенной библы двумя путями:<br>
- СВИ 199<br>
- Простым колом. Совместимость, типа, со старой библой.<br>
<br>
Кстати, текущая Библа еще далеко не наполнена, может рано мы копья то ломаем ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432232></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 10:02 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432232'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Ага, внимательное чтение даташитов помогает ;) Напоминаю, у нас ARMv5<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><br>
A load instruction provides a way to branch anywhere in the 4GB address space (known as a long branch).<br>
A 32-bit value is loaded directly from memory into the PC, causing a branch. A long branch can be preceded<br>
by MOV LR,PC or another instruction that writes the LR to generate a long subroutine call. In ARM<br>
architecture version 5 and above, bit[0] of the value loaded by a long branch controls whether the subroutine<br>
is executed in ARM state or Thumb state, just like bit[0] of the value moved to the PC by a BX instruction.<br>
</td></tr></table>
<br>
Значит, таки LDR PC,=adr годится. 8 байт. Как просили.<br>
<br>
Продолжаем чтение мануала ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432234></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 10:06 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432234'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Значит, таки LDR PC,=adr годится. 8 байт. Как просили.</td></tr></table>грю же...<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Продолжаем чтение мануала ;)</td></tr></table>давай давай... глядишь и возвращаца на джамперы не придеца..
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432236></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 10:10 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432236'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Значит, таки LDR PC,=adr годится. 8 байт. Как просили.</td></tr></table>
А, ну тогда - без вопросов.<br>
Вот только почему Сименсы юзают R12 для вызова тумбы - ума не приложу...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432237></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 10:10 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432237'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        я бы кста перенес больше 4 из начало либы... а то опять... начнеца... обрадует нас бенк 85 серией а мы опять зажали десяток байт...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432238></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 10:12 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=0#432238'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>А, ну тогда - без вопросов.<br>
Вот только почему Сименсы юзают R12 для вызова тумбы - ума не приложу...</td></tr></table>это не симены это компилятор... иар тоже юзает регистры... нуна посмотреть может для определенного девайса он будет как надо делать...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432249></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;24.05.2006 в 11:18 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432249'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Ну вроде должно нечто такое выйти. Доправляйте сами:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
;SWI dispatcher v0.0 (C)2006 by Rst7/CBSIE<br>
;CX75sw23<br>
;xcl:<br>
;-carm<br>
;-Z(CODE)CODE=A0FF1000-FFFFFFFF<br>
;-Z(CODE)PATCH1=A0092BE4-A0092BE7	//00000134+A0092AB0-00000137+A0092AB0<br>
;-Z(CODE)PATCH2=A0092BA4-A0092BAB	//000000F4+A0092AB0-000000FB+A0092AB0<br>
;-Z(CODE)LIBR=A0FE0000-A0FEFFFF<br>
;<br>
	NAME&nbsp;&nbsp;&nbsp;&nbsp;main<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RSEG&nbsp;&nbsp;&nbsp;&nbsp;PATCH1:CODE<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CODE32<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;B&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; main_jumper	; Патчим default swi<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RSEG&nbsp;&nbsp;&nbsp;&nbsp;PATCH2:CODE<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CODE32<br>
<br>
main_jumper:<br>
	LDR	PC,=main	; Переход в тело патча<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RSEG&nbsp;&nbsp;&nbsp;&nbsp;CODE:CODE<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CODE32<br>
main:<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ADR	R2,arm_jumper	; Берем адрес джампера<br>
	LDR	R1,[SP,#0]	; Берем CPSR<br>
	TST	R1, #0x20	; Проверяем на тумбу<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BEQ	arm_mode<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LDRH	R0,[LR]		; Зацепляем второе слово<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ADD	LR,LR,#3	; Устанавливаем мл. бит адреса возврата и пропускаем<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ADR	R2,thumb_jumper	; Берем адрес джампера<br>
arm_mode<br>
	LDR	R1,=Library	; Указатель на таблицу адресов<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LDR	R12,[R1,R0,LSL#2]	; Берем адрес функции<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;STR	R2,[SP,#0x14]	; Пишем его в адрес для возврата в стеке<br>
	LDR	PC,=0x1A4	; Возвращаемся<br>
arm_jumper:<br>
	BX	R12<br>
	CODE16<br>
thumb_jumper:<br>
	BX	R12<br>
	CODE32<br>
;<br>
; Собственно библиотека<br>
;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RSEG&nbsp;&nbsp;&nbsp;&nbsp;LIBR:DATA(2)<br>
Library:<br>
	DC32	0xA0001234	<br>
	DC32	0xA0001235<br>
; И т.д.<br>
	END&nbsp;&nbsp;&nbsp;&nbsp; main<br>
</div></div>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432650></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;26.05.2006 в 07:54 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432650'>swi-рыба</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Забыл про банкинг LR и про SWI 199 в тумбе. Теперь вроде правильно<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
;SWI dispatcher v0.0 (C)2006 by Rst7/CBSIE<br>
;CX75sw23<br>
;xcl:<br>
;-carm<br>
;-Z(CODE)CODE=A0FF1000-FFFFFFFF<br>
;-Z(CODE)PATCH1=A0092BE4-A0092BE7	//00000134+A0092AB0-00000137+A0092AB0<br>
;-Z(CODE)PATCH2=A0092BA4-A0092BAB	//000000F4+A0092AB0-000000FB+A0092AB0<br>
;-Z(CODE)LIBR=A0FE0000-A0FEFFFF<br>
;<br>
	NAME	main<br>
<br>
	RSEG	PATCH1:CODE<br>
	CODE32<br>
<br>
	B	main_jumper	; Патчим default swi<br>
<br>
	RSEG	PATCH2:CODE<br>
	CODE32<br>
<br>
main_jumper:<br>
	LDR	PC,=main	; Переход в тело патча<br>
<br>
	RSEG	CODE:CODE<br>
	CODE32<br>
main:<br>
	ADR	R2,arm_jumper	; Берем адрес джампера<br>
	LDR	R1,[SP,#0]	; Берем CPSR<br>
	TST	R1, #0x20	; Проверяем на тумбу<br>
	BEQ	arm_mode<br>
	LDR	R1,=199		; Служебный SWI для длинной библиотеки<br>
	CMP	R0,R1<br>
	LDREQH	R0,[LR]		; Зацепляем второе слово (длинный номер)<br>
	ADDEQ	LR,LR,#3	; Устанавливаем мл. бит адреса возврата и пропускаем DW<br>
	ADDNE	LR,LR,#1	; Если короткий, то достаточно только бит0<br>
	ADR	R2,thumb_jumper	; Берем адрес джампера<br>
arm_mode<br>
	STMFD	SP!,{LR}	; Копируем адрес возврата из LR_svc<br>
	LDMFD	SP!,{LR}^	; в LR_usr, он будет использован вызываемой функцией<br>
<br>
	LDR	R1,=Library	; Указатель на таблицу адресов<br>
	LDR	R12,[R1,R0,LSL#2]	; Берем адрес функции<br>
	STR	R2,[SP,#0x14]	; Пишем его в адрес для возврата в стеке<br>
	LDR	PC,=0x1A4	; Возвращаемся<br>
arm_jumper:<br>
	BX	R12<br>
	CODE16<br>
thumb_jumper:<br>
	BX	R12<br>
	CODE32<br>
;<br>
; Собственно библиотека<br>
;<br>
	RSEG&nbsp;&nbsp;&nbsp;&nbsp;LIBR:DATA(2)<br>
Library:<br>
	DC32	0xA0001234	<br>
	DC32	0xA0001235<br>
; И т.д.<br>
	END&nbsp;&nbsp;&nbsp;&nbsp; main<br>
</div></div><br>
<br>
Значит, что выходит для вызовов:<br>
<br>
Для ARM-ассемблер:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
&nbsp;&nbsp; swi&nbsp;&nbsp;nnnn ; вызов функции nnnn<br>
</div></div><br>
<br>
Для IAR-C<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
.h файл:<br>
...<br>
#pragma swi_number=0x0010<br>
__swi int fopen(const char * cFileName, unsigned int iFileFlags, unsigned int iFileMode, int *ErrorNumber);<br>
...<br>
<br>
.с файл:<br>
fhndl=fopen("0:\upor",....);<br>
</div></div><br>
<br>
Для тумбы<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
 swi short_n - вызов функции с номером от 0 до 255<br>
<br>
 swi 199<br>
 dc16 large_n - вызов функции с номером от 0 до 65536<br>
</div></div><br>
<br>
Нумерацию начинаем с 5, так как 0-4 пользуются в прошивке.<br>
<br>
В библиотеке каждый вход в таблицу - &lt;адрес ARM процедуры> или &lt;адрес THUMB процедуры>+1.<br>
<br>
ЗЫ _ЭТО_РЫБА_, а не готовый код ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432653></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;26.05.2006 в 08:04 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432653'>Re: swi-рыба</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>swi short_n - вызов функции с номером от 0 до 255</td></tr></table>deprecated ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432666></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;26.05.2006 в 09:24 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432666'>Re: swi-рыба</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Забыл про банкинг LR и про SWI 199 в тумбе. Теперь вроде правильно</td></tr></table>а еще забыл что в либе лежат адреса переменных ;)<br>
<br>
предлагаю две таблички с адресами процедур и адресами переменных...<br>
<br>
а у номерка swi старший битик в единичку для второй таблички... а обработчик в р0 возвращает указатель...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432815></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 04:52 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432815'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        а все ли так хорошо?<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script>seg004:A0A63BC4 00 20 0F E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MRS&nbsp;&nbsp;&nbsp;&nbsp; R2, CPSR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Transfer PSR to Register<br>
seg004:A0A63BC8 01 10 80 E0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD&nbsp;&nbsp;&nbsp;&nbsp; R1, R0, R1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op1 + Op2<br>
seg004:A0A63BCC 3F 00 C0 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BIC&nbsp;&nbsp;&nbsp;&nbsp; R0, R0, #0x3F&nbsp;&nbsp; ; Rd = Op1 & ~Op2<br>
seg004:A0A63BD0 3F 10 81 E2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD&nbsp;&nbsp;&nbsp;&nbsp; R1, R1, #0x3F&nbsp;&nbsp; ; Rd = Op1 + Op2<br>
seg004:A0A63BD4 3F 10 C1 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BIC&nbsp;&nbsp;&nbsp;&nbsp; R1, R1, #0x3F&nbsp;&nbsp; ; Rd = Op1 & ~Op2<br>
seg004:A0A63BD8 0F 00 12 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; TST&nbsp;&nbsp;&nbsp;&nbsp; R2, #0xF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 & Op2<br>
seg004:A0A63BDC 08 00 00 1A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BNE&nbsp;&nbsp;&nbsp;&nbsp; loc_A0A63C04&nbsp;&nbsp;&nbsp;&nbsp;; Branch<br>
seg004:A0A63BE0 01 20 A0 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MOV&nbsp;&nbsp;&nbsp;&nbsp; R2, #1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op2<br>
seg004:A0A63BE4 02 00 9F EF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SWI&nbsp;&nbsp;&nbsp;&nbsp; 0x9F0002&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Software interrupt<br>
seg004:A0A63BE8 0E F0 A0 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; RET&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Return from Subroutine</div></div>так что релиз откладывается...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432817></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 06:02 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432817'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        вот вам еще:<div align="left"><script type="text/javascript">codeDivStart(66671)</script>ROM:A00183EC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_A00183EC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; CODE XREF: sub_A0017A50+5Cp<br>
ROM:A00183EC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; sub_A0017A50+6Ap ...<br>
ROM:A00183EC 08 B5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; PUSH&nbsp;&nbsp;&nbsp;&nbsp;{R3,LR}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; Push registers<br>
ROM:A00183EE 00 AB&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD&nbsp;&nbsp;&nbsp;&nbsp; R3, SP, #0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op1 + Op2<br>
ROM:A00183F0 18 70&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STRB&nbsp;&nbsp;&nbsp;&nbsp;R0, [R3]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Store to Memory<br>
ROM:A00183F2 03 20&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MOV&nbsp;&nbsp;&nbsp;&nbsp; R0, #3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op2<br>
ROM:A00183F4 69 46&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MOV&nbsp;&nbsp;&nbsp;&nbsp; R1, SP&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op2<br>
ROM:A00183F6 AB DF&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; SWI&nbsp;&nbsp;&nbsp;&nbsp; 0xAB ; '&#235;'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Software interrupt<br>
ROM:A00183F8 01 B0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD&nbsp;&nbsp;&nbsp;&nbsp; SP, SP, #4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op1 + Op2<br>
ROM:A00183FA 08 BC&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; POP&nbsp;&nbsp;&nbsp;&nbsp; {R3}&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Pop registers<br>
ROM:A00183FC 18 47&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;R3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Branch to/from Thumb mode</div></div>чейт я не пойму скрытого смысла всего этого... эти прерывания обрабатываються темже обработчиком что мы патчим...<br>
<br>
предлагаю выше 4096 откидывать а вместо функции 0xAB заглушку ткнуть...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432819></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 06:23 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432819'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Странно. Дело в том, что это штатно _ПУСТЫЕ_ swi, т.е. ничего не должно происходить. Ты случайно не в буткор попал?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432821></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 06:24 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432821'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        первое непрерывано дергается из жабы, второе по пуску тела...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432822></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 06:27 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432822'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        из не логичного - программер должен заботиться о том переменная в либе или функция, т.е. помнить о старшем бите...<br>
из приятного - зато мы может получить указатель на интересующую нас функцию и отдать ее куданить параметром, например как калбэк функцию...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432823></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 06:29 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432823'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        либа2 прошла тест на тестовом ельфе... ельфы кста при таком подходе получаються гораздо меньше...<br>
<br>
<small><font color=#999999>Rst7, а выделить мне под эльфлоадер -1 байт это типа издевка? ;)</font></small>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432832></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 07:40 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432832'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>в общем исходник:<br>
...<br>
обратите внимание на отсутсвие первых функции, вместо них в самом патче заглушки, и вместо 171 функции заглушка...</td></tr></table>
<br>
Незачот ;) Никогда не получишь адрес переменной, в связи с тем, что макс значение, передаваемое через SWI (в ARM) есть 0xFFFFFF, а ты проверяешь на 0x80000000.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432834></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 07:43 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432834'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Незачот ;)</td></tr></table>на перездачу когда?<br>
исправил, пересобрал...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432835></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 07:46 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432835'>Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Незачот ;)</td></tr></table>на перездачу когда?</td></tr></table>
<br>
Сейчас. Бегом...<br>
<br>
Адресок в сообщении поправил. А то в натуре -1 - это мало ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432837></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 07:49 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432837'>Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <small><font color=#999999><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>А то в натуре -1 - это мало ;)</td></tr></table>-1 это в самый раз (FFFFFFFF)... только вот вы то где обитать будете?</font></small>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432838></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 07:49 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432838'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>в общем исходник:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
...<br>
	ldrh	r12,[lr]		; &#199;&#224;&#246;&#229;&#239;&#235;&#255;&#229;&#236; &#226;&#242;&#238;&#240;&#238;&#229; &#241;&#235;&#238;&#226;&#238; (&#228;&#235;&#232;&#237;&#237;&#251;&#233; &#237;&#238;&#236;&#229;&#240;)<br>
	add	lr,lr,#2		; &#239;&#240;&#238;&#239;&#243;&#241;&#234;&#224;&#229;&#236; DW<br>
	stmfd&nbsp;&nbsp; sp!, {lr}<br>
	tst	r12,#0x800000		;&#239;&#229;&#240;&#229;&#236;&#229;&#237;&#237;&#224;&#255;?<br>
...<br>
</div></div></td></tr></table>
А в тумбе макс 0xFFFF :D :D  - Вова, внимательнее надо быть ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432839></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 07:53 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432839'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>А в тумбе макс 0xFFFF :D :D  - Вова, внимательнее надо быть ;)</td></tr></table>некада, када такая куча альфатестеров вокруг... яж сименом воспитан... к 50й версии будет как надо...<br>
<br>
а потеме... давайте обнообразно делать... везде 0xFFFF? хватит нам 32кило функций и еще столько же переменных?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432840></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 07:55 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432840'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        хех там еще касяк... никада ваще переменные не получатся... ыыы...<br>
<br>
так что 0xffff на все режимы?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432845></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 08:03 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432845'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        гыы там и с тумбой касяк...<br>
<br>
/*пошел внимательно разглядывать руки*/
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432846></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 08:04 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432846'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>хех там еще касяк... никада ваще переменные не получатся... ыыы...<br>
<br>
так что 0xffff на все режимы?</td></tr></table>
<br>
Хватит. Да, не забудь убит проверку в начале на &lt;4096 ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432847></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 08:08 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432847'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Хватит. Да, не забудь убит проверку в начале на &lt;4096 ;)</td></tr></table>убивать не буду, иначе сыпаться в жабе будет, просто сделаю несколько умнее ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432859></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 09:38 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432859'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        расписывайтесь, исходник:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script>;SWI dispatcher v0.0 (C)2006 by Rst7/CBSIE<br>
;s75_32 by BoBa<br>
;xcl:<br>
;-carm<br>
;-Z(CODE)swi_code=A0078000-A00780FF<br>
;-Z(CODE)swi_vrezka1=A13A52D4-A13A52D7<br>
;-Z(CODE)swi_vrezka2=A13A51E8-A13A51EF<br>
;-Z(CODE)library2=A0074000-A0077FFF<br>
;<br>
	NAME main<br>
<br>
	RSEG swi_vrezka1:CODE<br>
	CODE32<br>
<br>
	B main_jumper ; Патчим default swi<br>
<br>
	RSEG swi_vrezka2:CODE<br>
	<br>
	CODE32<br>
	<br>
main_jumper:<br>
	LDR PC,=main ; Переход в тело патча<br>
<br>
	RSEG swi_code:CODE<br>
	CODE32<br>
ret<br>
	bx	lr			;заглушка<br>
<br>
swi_199<br>
	stmfd&nbsp;&nbsp; sp!, {r11,r12}<br>
	ldrh	r12,[lr,#-1]		; Зацепляем второе слово (длинный номер)<br>
	add	lr,lr,#2		; пропускаем DW<br>
	stmfd&nbsp;&nbsp; sp!, {lr}<br>
	ldr	r11,=Library 		; Указатель на таблицу адресов<br>
	tst	r12,#0x8000		;переменная?<br>
	bic	r12,r12,#0x8000		;15 бит в ноль<br>
	ldr	r11,[r11,r12,lsl#2] 	; Берем адрес функции<br>
	movne	r0,r11			;возвращаем указатель если переменная<br>
	blxeq	r11			;иначе дергаем функцию<br>
	ldmfd&nbsp;&nbsp; sp!,{lr}<br>
	ldmfd&nbsp;&nbsp; sp!,{r11,r12}<br>
	bx	lr<br>
<br>
main:<br>
	bic	r2,r0,#0x8000		;15 бит в ноль<br>
	cmp	r2,#4096		;наше?<br>
	bhi	exit			;валим<br>
<br>
	LDR	R1,=Library 		; Указатель на таблицу адресов<br>
	LDR	R12,[R1,R2,LSL#2]	; Берем адрес функции<br>
<br>
	tst	r0,#0x8000		;переменная?<br>
	strne	r12,[sp,#4]		;пишем указатель в стек<br>
	bne	exit<br>
<br>
	LDR R1,[SP,#0] ; Берем CPSR<br>
	TST R1, #0x20 ; Проверяем на тумбу<br>
	ADDne LR,LR,#1 ; Если короткий, то достаточно только бит0<br>
	ADRne R2,thumb_jumper ; Берем адрес джампера тумбы<br>
	ADReq R2,arm_jumper ; Берем адрес джампера иначе арма<br>
<br>
	STMFD SP!,{LR} ; Копируем адрес возврата из LR_svc<br>
	LDMFD SP!,{LR}^ ; в LR_usr, он будет использован вызываемой функцией<br>
<br>
	STR R2,[SP,#0x14] ; Пишем его в адрес для возврата в стеке<br>
exit<br>
	LDR PC,=0x35C ; Возвращаемся<br>
arm_jumper:<br>
	BX R12<br>
	CODE16<br>
thumb_jumper:<br>
	BX R12<br>
	CODE32<br>
;<br>
; Собственно библиотека<br>
;<br>
	RSEG&nbsp;&nbsp;&nbsp;&nbsp;library2:DATA(2)<br>
Library:<br>
	dc32	ret<br>
	dc32	ret<br>
	dc32	ret<br>
	dc32	ret<br>
	dc32	ret<br>
; И т.д.<br>
	END&nbsp;&nbsp;&nbsp;&nbsp; main<br>
</div></div>патч:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script>;library2<br>
#pragma enable old_equal_ff<br>
0x00074000: 008007A0008007A0008007A0008007A0<br>
0x00074010: 008007A0<br>
;swi_code<br>
0x00078000: 1EFF2FE100182DE9B1C05EE102E08EE2<br>
0x00078010: 00402DE968B09FE5800C1CE380CCCCE3<br>
0x00078020: 0CB19BE70B00A0113BFF2F010040BDE8<br>
0x00078030: 0018BDE81EFF2FE1802CC0E3400D52E3<br>
0x00078040: 0C00008A38109FE502C191E7800C10E3<br>
0x00078050: 04C08D150700001A00109DE5200011E3<br>
0x00078060: 01E08E1215208F12032F8F0200402DE9<br>
0x00078070: 0040FDE814208DE5D7FFA0E31CFF2FE1<br>
0x00078080: 60470000004007A0<br>
;swi_vrezka2<br>
#pragma disable old_equal_ff<br>
0x013A51E8: 63685F41626F7274 04F01FE5388007A0<br>
;swi_vrezka1<br>
0x013A52D4: 2C0000EA C3FFFFEA</div></div>либа2:<div align="left"><script type="text/javascript">codeDivStart(66671)</script>+74000<br>
#pragma enable old_equal_ff<br>
014: 0xA026CB85&nbsp;&nbsp; ; f005: DecToHex<br>
;018: 0x&nbsp;&nbsp; ; f006: GetAkku<br>
01C: 0xA006F071&nbsp;&nbsp; ; f007: GetLP<br>
020: 0xA01B40B4&nbsp;&nbsp; ; f008: SetIllumination<br>
024: 0xA0231A04&nbsp;&nbsp; ; f009: SwitchPhoneOff<br>
;<br>
028: 0xA0250320&nbsp;&nbsp; ; f010: fopen<br>
02C: 0xA02503A0&nbsp;&nbsp; ; f011: fread<br>
030: 0xA02504D0&nbsp;&nbsp; ; f012: fwrite<br>
034: 0xA0250274&nbsp;&nbsp; ; f013: fclose<br>
038: 0xA02502A4&nbsp;&nbsp; ; f014: fflush<br>
03C: 0xA02502D4&nbsp;&nbsp; ; f015: lseek<br>
;040: 0x&nbsp;&nbsp; ; f016: mkdir<br>
044: 0xA006F011&nbsp;&nbsp; ; f017: OpenReadCloseFile<br>
;048: 0x&nbsp;&nbsp; ; f018: GetFileAttrib<br>
;04C: 0x&nbsp;&nbsp; ; f019: SetFileAttrib<br>
;<br>
050: 0xA0094B50&nbsp;&nbsp; ; f020: malloc<br>
054: 0xA0094BAC&nbsp;&nbsp; ; f021: mfree<br>
058: 0xA0FC16DD&nbsp;&nbsp; ; f022: sPrintf<br>
05C: 0xA0FC3149&nbsp;&nbsp; ; f023: strcat<br>
060: 0xA0FC3169&nbsp;&nbsp; ; f024: strchr<br>
064: 0xA0FC318C&nbsp;&nbsp; ; f025: strcmp<br>
068: 0xA0FC3229&nbsp;&nbsp; ; f026: strcopy<br>
06C: 0xA0FC32A9&nbsp;&nbsp; ; f027: StrLen<br>
070: 0xA01F529D&nbsp;&nbsp; ; f028: wsAppendChar<br>
074: 0xA01F5251&nbsp;&nbsp; ; f029: wsInsertChar<br>
;<br>
;078: 0x&nbsp;&nbsp; ; f030: GetPITaddr<br>
;07C: 0x&nbsp;&nbsp; ; f031: DrawMainScreen<br>
;080: 0x&nbsp;&nbsp; ; f032: DrawScreenSaver<br>
084: 0xA09739E7&nbsp;&nbsp; ; f033: GetImgHeight<br>
088: 0xA09739F7&nbsp;&nbsp; ; f034: GetImgWidth<br>
08C: 0xA029A5E5&nbsp;&nbsp; ; f035: DrawImg<br>
090: 0xA09FEF7F&nbsp;&nbsp; ; f036: DrawImage2<br>
094: 0xA0299ADF&nbsp;&nbsp; ; f037: DrawCanvas<br>
098: 0xA09FEEA9&nbsp;&nbsp; ; f038: DrawImgBW<br>
09C: 0xA0299D05&nbsp;&nbsp; ; f039: AddIconToIconbar<br>
;<br>
;0A0: 0x&nbsp;&nbsp; ; f040: getEELiteMaxID<br>
;0A4: 0x&nbsp;&nbsp; ; f041: getEEFullMaxID<br>
;0A8: 0x&nbsp;&nbsp; ; f042: GetEELiteBlockAddress<br>
;0AC: 0x&nbsp;&nbsp; ; f043: getEELiteBlockSizeVersion<br>
;0B0: 0x&nbsp;&nbsp; ; f044: getEEFullBlockSizeVersion<br>
;0B4: 0x&nbsp;&nbsp; ; f045: StartWriteEELiteBlock<br>
;0B8: 0x&nbsp;&nbsp; ; f046: FinishWriteEELiteBlock<br>
;0BC: 0x&nbsp;&nbsp; ; f047: DeleteEELiteBlock<br>
;0C0: 0x&nbsp;&nbsp; ; f048: WriteEELiteBlock<br>
0C4: 0xA0FC33F1&nbsp;&nbsp; ; f049: StrChrRev<br>
;<br>
0C8: 0xA027FD00&nbsp;&nbsp; ; f050: PlaySound<br>
0CC: 0xA027670C&nbsp;&nbsp; ; f051: PlaySound2<br>
0D0: 0xA0B32FC0&nbsp;&nbsp; ; f052: PlaySoundLoop<br>
;0D4: 0x&nbsp;&nbsp; ; f053: AlarmClockRing<br>
;0D8: 0x&nbsp;&nbsp; ; f054: GetATCmdString<br>
0DC: 0xA09A2AA5&nbsp;&nbsp; ; f055: OriginalATCGSN<br>
;0E0: 0x&nbsp;&nbsp; ; f056: PostAtCommand<br>
0E4: 0xA08E4E5D&nbsp;&nbsp; ; f057: SendATAnswerStr<br>
;0E8: 0x&nbsp;&nbsp; ; f058: mfree_high<br>
0EC: 0xA0FC2445&nbsp;&nbsp; ; f059: MemChr<br>
;<br>
;0F0: 0x&nbsp;&nbsp; ; f060: SetFileSize<br>
;0F4: 0x&nbsp;&nbsp; ; f061: editOrNewTXTModule<br>
;0F8: 0x&nbsp;&nbsp; ; f062: LoadProcesses<br>
0FC: 0xA096EC21&nbsp;&nbsp; ; f063: SelectColor<br>
;100: 0x&nbsp;&nbsp; ; f064: GetVibraStatus<br>
;104: 0x&nbsp;&nbsp; ; f065: GetProvider<br>
;108: 0x&nbsp;&nbsp; ; f066: IsScreenSaver<br>
10C: 0xA08FE55F&nbsp;&nbsp; ; f067: IsUnlocked<br>
;110: 0x&nbsp;&nbsp; ; f068: TempLigntOn<br>
;114: 0x&nbsp;&nbsp; ; f069: GetWavLen<br>
;<br>
;118: 0x&nbsp;&nbsp; ; f070: HasNewSMS<br>
;11C: 0x&nbsp;&nbsp; ; f071: HasFlashSMS<br>
;120: 0x&nbsp;&nbsp; ; f072: ReadNewSMS<br>
;124: 0x&nbsp;&nbsp; ; f073: ReadFlashSMS<br>
;128: 0x&nbsp;&nbsp; ; f074: PlayFile<br>
;12C: 0x&nbsp;&nbsp; ; f075: StartMidlet<br>
;130: 0x&nbsp;&nbsp; ; f076: GetMissedCallsCount<br>
134: 0xA0093278&nbsp;&nbsp; ; f077: CallAfterTimer<br>
;138: 0x&nbsp;&nbsp; ; f078: ShowMsgInR1_3<br>
;13C: 0x&nbsp;&nbsp; ; f079: ShowMsgInR1_4<br>
;<br>
;140: 0x&nbsp;&nbsp; ; f080: ShowMsgInR1_7<br>
144: 0xA0D4B2AF&nbsp;&nbsp; ; f081: GetNetAccessMode<br>
;148: 0x&nbsp;&nbsp; ; f082: GetIlluminationDataTable<br>
14C: 0xA0FC2469&nbsp;&nbsp; ; f083: memcmp<br>
150: 0xA02BEA8D&nbsp;&nbsp; ; f084: StrToInt<br>
;154: 0x&nbsp;&nbsp; ; f085: SwitchVibraOnOff<br>
;158: 0x&nbsp;&nbsp; ; f086: <br>
;15C: 0x&nbsp;&nbsp; ; f087: IsCallAfterTimerStillRunning<br>
160: 0xA001838C&nbsp;&nbsp; ; f088: ClearMemory<br>
;164: 0x&nbsp;&nbsp; ; f089: MemCopy<br>
;<br>
;168: 0x&nbsp;&nbsp; ; f090: KeypressOn<br>
;16C: 0x&nbsp;&nbsp; ; f091: KeypressOff<br>
;170: 0x&nbsp;&nbsp; ; f092: GetCPUClock<br>
;174: 0x&nbsp;&nbsp; ; f093: GetCPULoad<br>
;178: 0x&nbsp;&nbsp; ; f094: GetMMIMemUsed<br>
;17C: 0x&nbsp;&nbsp; ; f095: GetNonPermMemAvail<br>
;180: 0x&nbsp;&nbsp; ; f096: ShowMainMenu<br>
;184: 0x&nbsp;&nbsp; ; f097: ShowNativeMenu<br>
;188: 0x&nbsp;&nbsp; ; f098: <br>
;18C: 0x&nbsp;&nbsp; ; f099: MS_Wallpaper_Flush<br>
<br>
;<br>
;190: 0x&nbsp;&nbsp; ; f100: TriggerUpdate<br>
;194: 0x&nbsp;&nbsp; ; f101: EndCall<br>
;198: 0x&nbsp;&nbsp; ; f102: EndCallBusy<br>
;19C: 0x&nbsp;&nbsp; ; f103: IsDirectCallActive<br>
;1A0: 0x&nbsp;&nbsp; ; f104: GetScreenSaverRAM<br>
;1A4: 0x&nbsp;&nbsp; ; f105: LockShed<br>
;1A8: 0x&nbsp;&nbsp; ; f106: UnLockShed<br>
1AC: 0xA024FDF0&nbsp;&nbsp; ; f107: FindFirstFile<br>
1B0: 0xA024FE70&nbsp;&nbsp; ; f108: FindNextFile<br>
1B4: 0xA024FD38&nbsp;&nbsp; ; f109: FindClose<br>
;<br>
;1B8: 0x&nbsp;&nbsp; ; f110: IsCalling<br>
;1BC: 0x&nbsp;&nbsp; ; f111: RefreshGPRSTraffic<br>
;1C0: 0x&nbsp;&nbsp; ; f112: GetGPRSTrafficPointer<br>
;1C4: 0x&nbsp;&nbsp; ; f113: DrawFrame<br>
;1C8: 0x&nbsp;&nbsp; ; f114: SetCurrentSecondOfCall<br>
;1CC: 0x&nbsp;&nbsp; ; f115: GetTypeOfCall<br>
;1D0: 0x&nbsp;&nbsp; ; f116: GetFunctionPointer<br>
;1D4: 0x&nbsp;&nbsp; ; f117: SetWindowMetrics<br>
;1D8: 0x&nbsp;&nbsp; ; f118: SetWindowText<br>
;1DC: 0x&nbsp;&nbsp; ; f119: SetWindowColor<br>
;<br>
;1E0: 0x&nbsp;&nbsp; ; f120: PushWindowBuffer<br>
;1E4: 0x&nbsp;&nbsp; ; f121: <br>
;1E8: 0x&nbsp;&nbsp; ; f122: <br>
;1EC: 0x&nbsp;&nbsp; ; f123: GetProfileFilter<br>
;1F0: 0x&nbsp;&nbsp; ; f124: SetVibration<br>
;1F4: 0x&nbsp;&nbsp; ; f125: IsIncognitoCall<br>
;1F8: 0x&nbsp;&nbsp; ; f126: Rand<br>
;1FC: 0x&nbsp;&nbsp; ; f127: <br>
200: 0xA05DBC51&nbsp;&nbsp; ; f128: GetCallsList<br>
;204: 0x&nbsp;&nbsp; ; f129: <br>
;<br>
;208: 0x&nbsp;&nbsp; ; f130: <br>
;20C: 0x&nbsp;&nbsp; ; f131: GetPathOfFoundFile<br>
;210: 0x&nbsp;&nbsp; ; f132: GetFileStats<br>
;214: 0x&nbsp;&nbsp; ; f133: StrCmpNoCase<br>
;218: 0x&nbsp;&nbsp; ; f134: ReadEEPROMData<br>
;21C: 0x&nbsp;&nbsp; ; f135: WriteEEPROMData<br>
;220: 0x&nbsp;&nbsp; ; f136: <br>
;224: 0x&nbsp;&nbsp; ; f137: <br>
;228: 0x&nbsp;&nbsp; ; f138: <br>
;22C: 0x&nbsp;&nbsp; ; f139: <br>
;<br>
;230: 0x&nbsp;&nbsp; ; f140: <br>
;234: 0x&nbsp;&nbsp; ; f141: <br>
;238: 0x&nbsp;&nbsp; ; f142: <br>
;23C: 0x&nbsp;&nbsp; ; f143: <br>
;240: 0x&nbsp;&nbsp; ; f144: <br>
;244: 0x&nbsp;&nbsp; ; f145: <br>
;248: 0x&nbsp;&nbsp; ; f146: <br>
;24C: 0x&nbsp;&nbsp; ; f147: <br>
;250: 0x&nbsp;&nbsp; ; f148: <br>
;254: 0x&nbsp;&nbsp; ; f149: <br>
;<br>
;258: 0x&nbsp;&nbsp; ; f150: <br>
;25C: 0x&nbsp;&nbsp; ; f151: <br>
;260: 0x&nbsp;&nbsp; ; f152: <br>
;264: 0x&nbsp;&nbsp; ; f153: <br>
;268: 0x&nbsp;&nbsp; ; f154: <br>
;26C: 0x&nbsp;&nbsp; ; f155: <br>
;270: 0x&nbsp;&nbsp; ; f156: <br>
;274: 0x&nbsp;&nbsp; ; f157: <br>
;278: 0x&nbsp;&nbsp; ; f158: <br>
;27C: 0x&nbsp;&nbsp; ; f159: <br>
;<br>
;280: 0x&nbsp;&nbsp; ; f160: Unicode_sprintf<br>
;284: 0x&nbsp;&nbsp; ; f161: Unicode_CopyStr2Str<br>
;288: 0x&nbsp;&nbsp; ; f162: Unicode_GetCharByPosition<br>
28C: 0xA0250A60&nbsp;&nbsp; ; f163: ws_2str<br>
;290: 0x&nbsp;&nbsp; ; f164: <br>
;294: 0x&nbsp;&nbsp; ; f165: <br>
;298: 0x&nbsp;&nbsp; ; f166: <br>
;29C: 0x&nbsp;&nbsp; ; f167: <br>
;2A0: 0x&nbsp;&nbsp; ; f168: <br>
;2A4: 0x&nbsp;&nbsp; ; f169: <br>
;<br>
;2A8: 0x&nbsp;&nbsp; ; f170: <br>
;2AC: 0xA0078000&nbsp;&nbsp; ; f171: Hex2Int_Old, loopback for swi 0xab!!!<br>
;2B0: 0x&nbsp;&nbsp; ; f172: DrawText<br>
;2B4: 0x&nbsp;&nbsp; ; f173: StrAnsi2Uni<br>
;2B8: 0x&nbsp;&nbsp; ; f174: StrUni2Ansi<br>
;2BC: 0x&nbsp;&nbsp; ; f175: <br>
;2C0: 0x&nbsp;&nbsp; ; f176: <br>
;2C4: 0x&nbsp;&nbsp; ; f177: <br>
;2C8: 0x&nbsp;&nbsp; ; f178: <br>
;2CC: 0x&nbsp;&nbsp; ; f179: <br>
;<br>
2D0: 0xA08FAB2F&nbsp;&nbsp; ; f180: GetDateTime<br>
2D4: 0xA026BB47&nbsp;&nbsp; ; f181: GetWeek<br>
2D8: 0xA0287E0B&nbsp;&nbsp; ; f182: GetProfile<br>
;2DC: 0x&nbsp;&nbsp; ; f183: SetProfile<br>
2E0: 0xA0FC2ADC&nbsp;&nbsp; ; f184: dwMODdw<br>
;2E4: 0x&nbsp;&nbsp; ; f185: <br>
;2E8: 0x&nbsp;&nbsp; ; f186: <br>
;2EC: 0x&nbsp;&nbsp; ; f187: <br>
;2F0: 0x&nbsp;&nbsp; ; f188: <br>
;2F4: 0x&nbsp;&nbsp; ; f189: <br>
;<br>
2F8: 0xA0060CE1&nbsp;&nbsp; ; f190: RunScaner<br>
;2FC: 0x&nbsp;&nbsp; ; f191: SpellTime<br>
;300: 0x&nbsp;&nbsp; ; f192: MiniGPS<br>
304: 0xA0060C61&nbsp;&nbsp; ; f193: RunDispatcher<br>
;308: 0x&nbsp;&nbsp; ; f194: GetAllPatchesByInject<br>
30C: 0xA006F0B1&nbsp;&nbsp; ; f195: ProcessFiles<br>
310: 0xA0060C01&nbsp;&nbsp; ; f196: GetBuffer<br>
;314: 0x&nbsp;&nbsp; ; f197: <br>
;318: 0x&nbsp;&nbsp; ; f198: <br>
31C: 0xA0078004&nbsp;&nbsp; ; f199: CallLibFunByNumber<br>
<br>
;<br>
;320: 0x&nbsp;&nbsp; ; v00: RamCap<br>
;324: 0x&nbsp;&nbsp; ; v01: <br>
328: 0xA8E2ED1A&nbsp;&nbsp; ; v02: RamNet<br>
;32C: 0x&nbsp;&nbsp; ; v03: <br>
;330: 0x&nbsp;&nbsp; ; v04: RamMissedCalls<br>
;334: 0x&nbsp;&nbsp; ; v05: RamMissedSMS<br>
;338: 0x&nbsp;&nbsp; ; v06: RamDateTime<br>
;33C: 0x&nbsp;&nbsp; ; v07: RamAlarm<br>
;340: 0x&nbsp;&nbsp; ; v08: RamAccPoint<br>
;344: 0x&nbsp;&nbsp; ; v09: RamScreensaver<br>
;<br>
;348: 0x&nbsp;&nbsp; ; v10: RamAutoTime<br>
34C: 0xA8A80000&nbsp;&nbsp; ; v11: RamStby<br>
;350: 0x&nbsp;&nbsp; ; v12: RamMissedMes<br>
;354: 0x&nbsp;&nbsp; ; v13: RamIsLocked<br>
;358: 0x&nbsp;&nbsp; ; v14: RamNetOnline<br>
;35C: 0x&nbsp;&nbsp; ; v15: RamScreenBrightness<br>
;360: 0x&nbsp;&nbsp; ; v16: RamMenuAnywhere<br>
;364: 0x&nbsp;&nbsp; ; v17: RamShutdownMode<br>
;368: 0x&nbsp;&nbsp; ; v18: RamIsShutdown<br>
;36C: 0x&nbsp;&nbsp; ; v19: RamMainscreenAccuIcon<br>
;<br>
;370: 0x&nbsp;&nbsp; ; v20: RamRandSeed<br>
;374: 0x&nbsp;&nbsp; ; v21: <br>
;378: 0x&nbsp;&nbsp; ; v22: <br>
;37C: 0x&nbsp;&nbsp; ; v23: <br>
;380: 0x&nbsp;&nbsp; ; v24: <br>
;384: 0x&nbsp;&nbsp; ; v25: <br>
;388: 0x&nbsp;&nbsp; ; v26: <br>
38C: 0xA8B533C4&nbsp;&nbsp; ; v27: RamProfileNum<br>
<br>
;<br>
390: 0xA8A80000&nbsp;&nbsp; ; z00: FreeRAM<br>
394: 0x0000123D&nbsp;&nbsp; ; z01: LP_MonthsShort<br>
398: 0x00000260&nbsp;&nbsp; ; z02: Pic_Big0<br>
39C: 0x00000830&nbsp;&nbsp; ; z03: Pic_Little0<br>
3A0: 0x00000800&nbsp;&nbsp; ; z04: Pic_Extra<br>
;3A4: 0x&nbsp;&nbsp; ; z05: Pic_Profiles<br>
;3A8: 0x&nbsp;&nbsp; ; z06: Pic_Vibra<br>
;3AC: 0x&nbsp;&nbsp; ; z07: Pic_Call<br>
;3B0: 0x&nbsp;&nbsp; ; z08: Pic_AdvNet<br>
;3B4: 0x&nbsp;&nbsp; ; z09: LP_MonthsLong<br>
;<br>
;3B8: 0x&nbsp;&nbsp; ; z10: LP_Weekdays<br>
;3BC: 0x&nbsp;&nbsp; ; z11: Pic_Calendar<br>
;3C0: 0x&nbsp;&nbsp; ; z12: Pic_AccuGraph<br>
;3C4: 0x&nbsp;&nbsp; ; z13: <br>
;3C8: 0x&nbsp;&nbsp; ; z14: <br>
;3CC: 0x&nbsp;&nbsp; ; z15: <br>
;3D0: 0x&nbsp;&nbsp; ; z16: <br>
;3D4: 0x&nbsp;&nbsp; ; z17: <br>
;3D8: 0x&nbsp;&nbsp; ; z18: <br>
;3DC: 0x&nbsp;&nbsp; ; z19: <br>
;<br>
;3E0: 0x&nbsp;&nbsp; ; z20: Additional_PIT_address<br>
;3E4: 0x&nbsp;&nbsp; ; z21: Additional_PIT_start<br>
;3E8: 0x&nbsp;&nbsp; ; z22: Additional_PIT_end<br>
;3EC: 0x&nbsp;&nbsp; ; z23: <br>
;3F0: 0x&nbsp;&nbsp; ; z24: PictureRelocationTable<br>
;3F4: 0x&nbsp;&nbsp; ; z25: PictureRelocationBase<br>
;3F8: 0x&nbsp;&nbsp; ; z26: <br>
;3FC: 0x&nbsp;&nbsp; ; z27: <br>
#pragma disable old_equal_ff<br>
+0</div></div>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432866></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 10:10 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432866'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>расписывайтесь, исходник:<br>
...<br>
</td></tr></table>
<br>
Ну в тумбе опять хрени накрутил ;)<br>
<br>
Для начала - LDRH c нечетного адреса (потому как LR указывает на нечетный для правильного возврата)<br>
<br>
Далее, сначала<br>
	ldr	r11,[r11,r12,lsl#2] 	; Берем адрес функции<br>
а потом проверяем старший бит - и берем/вызываем<br>
	tst	r12,#0x8000		;переменная?<br>
<br>
А какой адрес она возьмет при 0x8123?<br>
<br>
Аналогичная хрень в АРМ'е!!!<br>
<br>
<br>
Много лишних действий для тумбы - чем мой вариант не подошел?<br>
<br>
Покури пока, щас я свой вариант сделаю ;)
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432875></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 10:28 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432875'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Ну такой вариант ;)<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script><br>
;SWI dispatcher v0.0 (C)2006 by Rst7/CBSIE<br>
;CX75sw23<br>
;xcl:<br>
;-carm<br>
;-Z(CODE)CODE=A0FC8000-A0FC80FF<br>
;-Z(CODE)PATCH1=A0092BE4-A0092BE7	//00000134+A0092AB0-00000137+A0092AB0<br>
;-Z(CODE)PATCH2=A0092BA4-A0092BAB	//000000F4+A0092AB0-000000FB+A0092AB0<br>
;-Z(CODE)PATCH3=A0092C54-A0092C57	//000001A4+A0092AB0-000001A7+A0092AB0<br>
;-Z(CODE)LIBR=A0FC4000-A0FC7FFF<br>
;<br>
	NAME	main<br>
<br>
	RSEG	PATCH1:CODE<br>
	CODE32<br>
<br>
	B	main_jumper	; Патчим default swi<br>
<br>
	RSEG	PATCH2:CODE<br>
	CODE32<br>
<br>
main_jumper:<br>
	LDR	PC,=main	; Переход в тело патча<br>
<br>
	RSEG	PATCH3:CODE<br>
	CODE32<br>
return_from_swi:<br>
<br>
<br>
	RSEG	CODE:CODE<br>
	CODE32<br>
nullsub:<br>
	BX	LR<br>
main:<br>
	BIC	R1,R0,#0x8000		; Проверяем на макс номер<br>
	CMP	R1,#4096<br>
	BHI	exit			; Не поместились<br>
	ADR	R2,arm_jumper		; Берем адрес джампера<br>
	LDR	R1,[SP,#0]		; Берем CPSR<br>
	TST	R1, #0x20		; Проверяем на тумбу<br>
	BEQ	arm_mode<br>
	CMP	R0,#199			; Служебный SWI для длинной библиотеки<br>
	LDREQH	R0,[LR]			; Зацепляем второе слово (длинный номер)<br>
	ADDEQ	LR,LR,#3		; Устанавливаем мл. бит адреса возврата и пропускаем DW<br>
	ADDNE	LR,LR,#1		; Если короткий, то достаточно только бит0<br>
	ADR	R2,thumb_jumper		; Берем адрес джампера<br>
arm_mode<br>
	LDR	R1,=Library		; Указатель на таблицу адресов<br>
	TST	R0,#0x8000		; А не адрес нам надо получить?<br>
	BICNE	R0,R0,#0x8000		; Если получение адреса, сброс старшего бита<br>
	STMEQFD	SP!,{LR}		; Копируем адрес возврата из LR_svc только если вызов функции<br>
	LDMEQFD	SP!,{LR}^		; в LR_usr, он будет использован вызываемой функцией<br>
	LDR	R12,[R1,R0,LSL#2]	; Берем адрес функции<br>
	STRNE	R12,[SP,#4]		; пишем адрес в R0(стек)<br>
	STREQ	R2,[SP,#0x14]		; Пишем адрес джампера для возврата в стеке (PC)<br>
exit:<br>
	LDR	PC,=return_from_swi	; Возвращаемся<br>
arm_jumper:<br>
	BX	R12<br>
	CODE16<br>
thumb_jumper:<br>
	BX	R12<br>
	CODE32<br>
;<br>
; Собственно библиотека<br>
;<br>
	RSEG&nbsp;&nbsp;&nbsp;&nbsp;LIBR:DATA(2)<br>
Library:<br>
	DC32	nullsub<br>
	DC32	nullsub<br>
	DC32	nullsub<br>
	DC32	nullsub<br>
	DC32	nullsub<br>
; И т.д.<br>
	END&nbsp;&nbsp;&nbsp;&nbsp; main<br>
</div></div>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432886></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 10:50 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432886'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Не совсем я понял насчет переменных.<br>
у нас в библе v00 = f200 = f0xC8 = RamCap.<br>
Как ее получить ?<br>
SWI 0x80C8 ?<br>
Какова концепция ?<br>
<br>
Да, таки да.<br>
Забейте, плиз, чтоб СВИ 200-255 жестко указывали на адреса, чтоб не было необходимости взводить старший бит.<br>
Для тумбы так будет проще
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432890></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 11:04 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432890'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        А можно сделать еще проще:<br>
если адрес в библе начинается на А8 или 00 - то надо вернуть его самого.<br>
Если на А0-А1 - запустить функцию.<br>
Если нет - сгенерить сэкзит, в котором бы был виден номер этого СВИ.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432897></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 11:39 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432897'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Ну в тумбе опять хрени накрутил ;)</td></tr></table>еще каких..<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Для начала - LDRH c нечетного адреса (потому как LR указывает на нечетный для правильного возврата)</td></tr></table>упарил меня этот lr... то чотный то нечотный...<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Много лишних действий для тумбы - чем мой вариант не подошел?</td></tr></table>каждый должен заниматься своим делом ;) диспетчер прерываний диспетчировать мперывания, обработчик 199го, обрабатывать 199го...<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Покури пока, щас я свой вариант сделаю ;)</td></tr></table>нечего ((
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432899></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 11:42 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432899'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>А можно сделать еще проще:<br>
если адрес в библе начинается на А8 или 00 - то надо вернуть его самого.<br>
Если на А0-А1 - запустить функцию.</td></tr></table>а когда будем код в раме пускать на каком месте будем волосы рвать?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432902></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 11:44 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432902'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>а когда будем код в раме пускать на каком месте будем волосы рвать?</td></tr></table>
С чего бы это ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432905></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 11:48 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432905'>Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>С чего бы это ?</td></tr></table>дык с того что либа по твоему будет содержимое возвращать...<br>
<br>
и содержимое тоже нельзя возвращать... как менять?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432908></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 11:55 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=1#432908'>Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>дык с того что либа по твоему будет содержимое возвращать...</td></tr></table>
Может у нас разные понятия о либах, но я бы ложил в нее только следующие объекты:<br>
- функции прошивки (начинаются на А0-А1)<br>
- адреса в раме (А8)<br>
- константы (00)<br>
Первый случай надо запустить. Второй и третий - выдать содержимое.<br>
<br>
Не важно откуда вызывается СВИ. Хоть из флеша, хоть из рамы.<br>
Смотреть надо на адрес в библе
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432916></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 12:33 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432916'>Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>- функции прошивки (начинаются на А0-А1)</td></tr></table>где гарантия что не будет супер-пупер функция в раме?<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>- адреса в раме (А8)<br>
- константы (00)<br>
Первый случай надо запустить. Второй и третий - выдать содержимое.</td></tr></table>есть у тебя переменная в раме, прочел ты ее и пришел к выводу что нуна бы ее проинкрементировать... и как?<br>
<br>
ps а константы собственно и так отдаются..
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432917></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 12:39 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432917'>Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>где гарантия что не будет супер-пупер функция в раме?</td></tr></table>
Не ложить их в раму - вот их там и не будет. А иначе - откуда им взяться ?<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>есть у тебя переменная в раме, прочел ты ее и пришел к выводу что нуна бы ее проинкрементировать... и как?<br>
ps а константы собственно и так отдаются..</td></tr></table>
Возвращается не содержимое переменной, а ее адрес.<br>
Получил ты адрес - делай с ним что хочешь: инкремент, декремент, LDR, LDRH, LDRB...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432920></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 12:43 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432920'>Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Не ложить их в раму - вот их там и не будет. А иначе - откуда им взяться ?</td></tr></table>ну во первых они уже там есть... а вовторых кто его знает чего завтра присаичит... мож феи заведуться...<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Возвращается не содержимое переменной, а ее адрес.</td></tr></table>так и так адрес возвращаеться, тыже выше говорил про содержтмое...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432923></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 12:52 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432923'>Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>ну во первых они уже там есть... а вовторых кто его знает чего завтра присаичит... мож феи заведуться...</td></tr></table>
Какая-такая супер-пупер функция живет в раме ?<br>
<br>
Будут феи - будем думать.<br>
А зачем сейчас себя нагружать необходимостью установки старшего бита ?<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>так и так адрес возвращаеться, тыже выше говорил про содержтмое...</td></tr></table>
Содержимое либы = адрес переменной<br>
<br>
Все просто: хотелось бы адрес переменной A8123456<br>
получать просто СВИ 0х12<br>
а не СВИ 0х8012<br>
Ибо нефиг запускать нечто по адресу A8123456
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432926></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 13:09 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432926'>Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Будут феи - будем думать.</td></tr></table>и будем все опять переделывать...<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>А зачем сейчас себя нагружать необходимостью установки старшего бита ?</td></tr></table>невижу трудности ожин раз прописать в заголовке/макоросе<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Все просто: хотелось бы адрес переменной A8123456<br>
получать просто СВИ 0х12<br>
а не СВИ 0х8012</td></tr></table>как узнать адрес 10й функции?<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Ибо нефиг запускать нечто по адресу A8123456</td></tr></table>не факт
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432927></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 13:13 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432927'>Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Ибо нефиг запускать нечто по адресу A8123456</td></tr></table>не факт</td></tr></table>
Если тебе нужно запустить раму - сделай так:<br>
СВИ 0х12<br>
blx r0<br>
В чем проблема ?<br>
<br>
А иначе придется все время судорожно думать - взводить бит или нет ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432928></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 13:26 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432928'>Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Если тебе нужно запустить раму - сделай так:<br>
СВИ 0х12<br>
blx r0<br>
</td></tr></table>где тут blx?<div align="left"><script type="text/javascript">codeDivStart(66671)</script>#pragma swi_number=8<br>
__arm __swi long SetIllumination(unsigned char dev,unsigned long param1,unsigned short bright,unsigned long delay);</div></div><br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>В чем проблема ?</td></tr></table>проблема в том что в конечном итоге придеться две таблицы делать... одна с адресами а вторая с тем что по этим адресам лежит...<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>А иначе придется все время судорожно думать - взводить бит или нет ?</td></tr></table>ровно один раз:<div align="left"><script type="text/javascript">codeDivStart(66671)</script>#pragma swi_number=0x10<br>
__arm __swi void runfunc();<br>
<br>
#pragma swi_number=0x8010<br>
__arm __swi int *getvar();</div></div>впрочем как и макросами для кайла...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432930></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 13:33 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432930'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Тебя не убедишь...<br>
Ладно, сам сделаю на досуге...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432931></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 13:44 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432931'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>расписывайтесь, исходник:<br>
патч...<br>
</td></tr></table>Не включается тело с этим патчем, никаких признаков жизни вообще не подает
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432939></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 14:16 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432939'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Тебя не убедишь...</td></tr></table>убедишь в чем? в том что какой-то кусок кода вместо меня будет принимать решение указатель мне нужен или вызов? не убедишь...<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Ладно, сам сделаю на досуге...</td></tr></table>а клоном больше клоном меньше...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432955></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 15:27 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432955'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Тебя не убедишь...</td></tr></table>убедишь в чем? в том что какой-то кусок кода вместо меня будет принимать решение указатель мне нужен или вызов? не убедишь...<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Ладно, сам сделаю на досуге...</td></tr></table>а клоном больше клоном меньше...</td></tr></table>
<br>
Не забываем, что иногда необходим указатель на функцию - например malloc и mfree для передачи в конструкторы объектов. Так что наш с Вовой вариант - самое то.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432956></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 15:30 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432956'>Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Не забываем, что иногда необходим указатель на функцию - например malloc и mfree для передачи в конструкторы объектов. Так что наш с Вовой вариант - самое то.</td></tr></table>
Вот для таких вариантов и юзайте старший бит, для отключения логики и принудительного возвращения адреса
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432958></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 15:54 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432958'>Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Вот для таких вариантов и юзайте старший бит</td></tr></table>так для таких и будем юзать<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>для отключения логики и принудительного возвращения адреса</td></tr></table>дык так и есть с поднятым битом адрес, м опущеным вызов...<br>
<br>
Rst7, читай доку как перегрузить оператор "*" шоп он на бит сам поднимал ))<br>
<br>
так что все прям как должно быть...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432959></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 15:57 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432959'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Не включается тело с этим патчем, никаких признаков жизни вообще не подает</td></tr></table>вот уж незнаю...<br>
только что перетащил эльфлоадер на новые рельсы и тестовый эльф, все работает... лоадер инитится 9ым мастером...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432960></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 15:59 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432960'>Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>так для таких и будем юзать</td></tr></table>
390: 0xA8A80000   ; f228: FreeRAM<br>
Что произойдет если сделать СВИ 228 ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432962></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 16:11 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432962'>Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>390: 0xA8A80000   ; f228: FreeRAM<br>
Что произойдет если сделать СВИ 228 ?</td></tr></table>перейдет по адресу 0xA8A80000
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432963></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 16:17 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432963'>Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>390: 0xA8A80000   ; f228: FreeRAM<br>
Что произойдет если сделать СВИ 228 ?</td></tr></table>перейдет по адресу 0xA8A80000</td></tr></table>
чтд... :(
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=432965></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;27.05.2006 в 16:24 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#432965'>Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>чтд... :(</td></tr></table><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>с поднятым битом адрес, c опущеным вызов...</td></tr></table><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>какой-то кусок кода вместо меня будет принимать решение указатель мне нужен или вызов?</td></tr></table>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433335></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 07:00 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433335'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Вобщем, сделал так:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script>bne&nbsp;&nbsp;&nbsp;&nbsp; swi_adr ; старший бит взведен - вернуть адрес<br>
lsr&nbsp;&nbsp;&nbsp;&nbsp; r0, r3, #24<br>
cmp&nbsp;&nbsp;&nbsp;&nbsp; r0, #0xFF ; начинается c FF - ничего не делать<br>
beq&nbsp;&nbsp;&nbsp;&nbsp; swi_quit<br>
cmp&nbsp;&nbsp;&nbsp;&nbsp; r0, #0xA8 ; начинается с A8 - вернуть адрес<br>
beq&nbsp;&nbsp;&nbsp;&nbsp; swi_adr<br>
cmp&nbsp;&nbsp;&nbsp;&nbsp; r0, #0 ; не начинается с 00 - выполнить функцию<br>
bne&nbsp;&nbsp;&nbsp;&nbsp; swi_fun<br>
swi_addr:<br>
...<br>
swi_fun:<br>
...<br>
swi_quit:<br>
...</div></div><br>
Есть возражения ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433358></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:11 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433358'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        есть...<br>
вариант предложенный мной:<br>
1. нужен вызов => бит=0<br>
2. нужен адрес => бит=1<br>
<br>
твой вариант:<br>
1. нужен вызов в фф => бит=0<br>
2. нужен вызов в раме => бит=1<br>
3. нужен адрес в фф => бит=1<br>
4. нужен адрес в фф => бит=0<br>
<br>
где логика?<br>
в варианте предложенном выше вообще вызов в раму не возможен...<br>
<br>
и еще, когда что-то переедет из одной области в другой а ты это испоьзуешь результат будет не предсказуем...<br>
<br>
тот же сканер кагда вдруг потребуеться сканить фф+рам закладывать в него чтобы он отичал где сканит? зачем??<br>
никакой логики закладывать нелогичный интелект в логичное решение...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433360></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:16 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433360'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        а вот идея с екзитом мне нравиться, только я предлагаю не ff сравнивать а 0 класть в неопределенные функции...<br>
потому как глянул в свою облать там уже какаша не понятная...<br>
<br>
хотя точно также можно всю либу заполнить FF сразу..
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433361></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:23 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433361'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>в варианте предложенном выше вообще вызов в раму не возможен...</td></tr></table>Да. Не могу себе представить ситуацию когда он может понадобиться.<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>когда что-то переедет из одной области в другой а ты это испоьзуешь результат будет не предсказуем...</td></tr></table>Это я не понял<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>тот же сканер кагда вдруг потребуеться сканить фф+рам закладывать в него чтобы он отичал где сканит? зачем??</td></tr></table>Зачем раму сканить ?<br>
<br>
Мой вариант проще тем, что положил ты в либу адрес рамы (допустим A8123456) или константу 0x00001234, и не надо думать как вызывать СВИ (CallFun или CallAddr), надо ли взводить какие то биты, надо ли юзать некрасивую тумбовую конструкцию SWI 199 + DW num...<br>
Рама - она и есть рама, просто вернуть адрес...<br>
Константа - она и есть константа, просто вернуть ее...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433363></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:31 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433363'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Да. Не могу себе представить ситуацию когда он может понадобиться.</td></tr></table>да легко... лежит себе адрес на 0xA8000xxx а по этому адресу заглушка... загрузился эльф и поправил заглушку на себя...<br>
второй вариант, вполне допускаю что часть swilib попадет в раму именно для этих нужд...<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>когда что-то переедет из одной области в другой а ты это испоьзуешь результат будет не предсказуем...</td></tr></table>Это я не понял</td></tr></table>не совсем корректный пример но он пример... в х35 объекты гуя или как там оно лежат в фф, т.е. можно в либу положить указатель до какого-то объекта... в s75, по словам Single'a оно уже в раме... юзая твой вариант не получиться легко портируемого патча... я уже молчу про эльфов...<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Зачем раму сканить ?</td></tr></table>просто пример кода... который придеться услажнять при твоем подходе...<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Мой вариант проще тем... ...и не надо думать как вызывать СВИ...</td></tr></table>да, зато надо думать где лежит то что нужно, чтобы понять как вызывать СВИ...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433368></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:40 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433368'>Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>лежит себе адрес на 0xA8000xxx а по этому адресу заглушка... загрузился эльф и поправил заглушку на себя...</td></tr></table>
Да, согласен, в будущем это может понадобиться.<br>
Но и в моих словах есть логика, согласись.<br>
<br>
Прелагаю такой компромисс:<br>
юзаем не один старший бит, а два:<br>
00 - проверки на логику (00, A8, FF)<br>
01 - безоговорочный вызов функции<br>
10 - безоговорочная отдача адреса<br>
11 - что-нить сюда еще придумаем.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433370></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:45 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433370'>Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Да, согласен, в будущем это может понадобиться.</td></tr></table>фуф ну хоть в чем-то убедил ;)<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Но и в моих словах есть логика, согласись.</td></tr></table>если бы видел то не спорил бы...<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>юзаем не один старший бит, а два:</td></tr></table>одного не пойму - зачем??
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433371></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:48 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433371'>Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>одного не пойму - зачем??</td></tr></table>
Для авторежима, которым можно пользоваться в 99% случаев.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433376></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 10:54 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433376'>Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        зачем какой авторежим? зачем нелогичная логика? зачем то что наверняка даст тяжело отлавливаемые глюки? что автоматить? огромные трудоемкие операции?<br>
<br>
ты програмя под, например, винтел, имея какой либо указатель, и тебе нужно либо сам указатель, либо вызов, задумываешься а на какую область указатель? есть какие авторежимы? нет, ты либо приводишь его к одному типу либо к другом... вот это самое приведение типов и вылилось в бит...<br>
<br>
<br>
зачем авторежим?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433390></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;30.05.2006 в 12:14 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433390'>Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>ровно один раз:<div align="left"><script type="text/javascript">codeDivStart(66671)</script>#pragma swi_number=0x10<br>
__arm __swi void runfunc();<br>
<br>
#pragma swi_number=0x8010<br>
__arm __swi int *getvar();</div></div>впрочем как и макросами для кайла...</td></tr></table>
Ну вот и пропиши в первом случае не 0x10, а 0x4010.<br>
Таким образом ты не будешь юзать авторежим, который тебе не нужен. А мне - нужен.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433495></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 08:52 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433495'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        Леш, ну неужели ты будешь писать ручками swi 0xXXX??<br>
ну точно так же я тебе могу сказать опиши макросы %malloc или %GetFreeRAM зачем извращаться то??<br>
<br>
тут проблема с поиском по паттернам назрела и ее нужно решать, причем тебе как автору менеджера сигнатур... а мы тут лбами безсмысла сталкиваемся...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433496></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 08:55 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=2#433496'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <small><font color=#999999>и еще я же ленивый</font></small> :lol::lol:
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433501></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 09:19 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433501'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>проблема с поиском по паттернам назрела</td></tr></table>
А чо за проблема ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433502></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 09:27 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433502'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>А чо за проблема ?</td></tr></table><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 в аське пишет: </b>Слушай, а что делать с паттернами разных CSM/GUI функций. Они там все из себя одинаковые, типа<br>
<br>
doit1(blablabla)<br>
{<br>
 if (GetCurCEPID()==0x420A) csm_q=CSM_root.q1; else csm_q=CSM_root.q2; doit(csm_q,blablabla);<br>
}<br>
<br>
Т.е. код везде одинаковый, кроме BL. Надо искать вторую функцию, но указатель ставить на первую.</td></tr></table>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433503></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 09:30 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433503'>Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 в аське пишет: </b>Слушай, а что делать с паттернами разных CSM/GUI функций. Они там все из себя одинаковые, типа<br>
<br>
Т.е. код везде одинаковый, кроме BL. Надо искать вторую функцию, но указатель ставить на первую.</td></tr></table>
Тю, так придумайте синтаксис для паттерна, влеплю его в Смелтер
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433504></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 09:32 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433504'>Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Тю, так придумайте синтаксис для паттерна, влеплю его в Смелтер</td></tr></table>так давно предлагаю помозговать: <a href="http://forum.siemens-club.org/viewtopic.php?TopicID=60347" target=_blank>поиск... глубокий...</a><br>
<br>
конкретно: <a href="http://forum.siemens-club.org/viewtopic.php?TopicID=60347&page=0#433512" target=_blank>поиск... глубокий...</a>
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433505></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 09:37 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433505'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        ну кто хотел кода в раме?<div align="left"><script type="text/javascript">codeDivStart(66671)</script>ram:A8F7AE44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_A8F7AE44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; CODE XREF: sub_A8F77A5C+44p<br>
ram:A8F7AE44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; sub_A8F7863C+38p ...<br>
ram:A8F7AE44 00 00 50 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, #0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE48 1E FF 2F 01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BXEQ&nbsp;&nbsp;&nbsp;&nbsp;LR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Branch to/from Thumb mode<br>
ram:A8F7AE4C 48 30 9F E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R3, =unk_8D9D4&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE50 00 10 93 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R1, [R3]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE54 10 10 91 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R1, [R1,#0x10]&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE58 00 00 81 E0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD&nbsp;&nbsp;&nbsp;&nbsp; R0, R1, R0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op1 + Op2<br>
ram:A8F7AE5C<br>
ram:A8F7AE5C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE5C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; CODE XREF: sub_A8F7AE44+2Cj<br>
ram:A8F7AE5C&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; sub_A8F7AE44+34j ...<br>
ram:A8F7AE5C 00 20 93 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R2, [R3]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE60 10 20 92 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R2, [R2,#0x10]&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE64 01 00 52 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R2, R1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE68 04 00 00 3A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BCC&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE80&nbsp;&nbsp;&nbsp;&nbsp;; Branch<br>
ram:A8F7AE6C 01 00 50 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, R1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE70 F9 FF FF 9A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BLS&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE5C&nbsp;&nbsp;&nbsp;&nbsp;; Branch<br>
ram:A8F7AE74 00 00 52 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R2, R0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE78 F7 FF FF 3A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BCC&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE5C&nbsp;&nbsp;&nbsp;&nbsp;; Branch<br>
ram:A8F7AE7C 1E FF 2F E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Branch to/from Thumb mode<br>
ram:A8F7AE80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; ---------------------------------------------------------------------------<br>
ram:A8F7AE80<br>
ram:A8F7AE80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; CODE XREF: sub_A8F7AE44+24j<br>
ram:A8F7AE80 01 00 50 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, R1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE84 01 00 00 2A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BCS&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE90&nbsp;&nbsp;&nbsp;&nbsp;; Branch<br>
ram:A8F7AE88 00 00 52 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R2, R0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE8C 1E FF 2F 21&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BXCS&nbsp;&nbsp;&nbsp;&nbsp;LR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Branch to/from Thumb mode<br>
ram:A8F7AE90<br>
ram:A8F7AE90&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE90&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; CODE XREF: sub_A8F7AE44+40j<br>
ram:A8F7AE90 01 00 50 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, R1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE94 F0 FF FF 9A&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BLS&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AE5C&nbsp;&nbsp;&nbsp;&nbsp;; Branch<br>
ram:A8F7AE98 1E FF 2F E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Branch to/from Thumb mode<br>
ram:A8F7AE98&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; End of function sub_A8F7AE44<br>
ram:A8F7AE98<br>
ram:A8F7AE98&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; ---------------------------------------------------------------------------<br>
ram:A8F7AE9C D4 D9 08 00 off_A8F7AE9C&nbsp;&nbsp;&nbsp;&nbsp;DCD unk_8D9D4&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; DATA XREF: sub_A8F7AE44+8r<br>
ram:A8F7AEA0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; ---------------------------------------------------------------------------<br>
ram:A8F7AEA0<br>
ram:A8F7AEA0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; loc_A8F7AEA0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; CODE XREF: sub_A03EAE70j<br>
ram:A8F7AEA0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; DATA XREF: seg004:off_A03EAE74o<br>
ram:A8F7AEA0 28 C0 9F E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R12, =off_A8E9EB10 ; Load from Memory<br>
ram:A8F7AEA4 00 20 A0 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MOV&nbsp;&nbsp;&nbsp;&nbsp; R2, #0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op2<br>
ram:A8F7AEA8 04 30 9C E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R3, [R12,#4]&nbsp;&nbsp;&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AEAC 01 00 53 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R3, R1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AEB0 81 10 81 80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADDHI&nbsp;&nbsp; R1, R1, R1,LSL#1 ; Rd = Op1 + Op2<br>
ram:A8F7AEB4 01 11 8C 80&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADDHI&nbsp;&nbsp; R1, R12, R1,LSL#2 ; Rd = Op1 + Op2<br>
ram:A8F7AEB8 24 10 D1 85&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDRHIB&nbsp;&nbsp;R1, [R1,#0x24]&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AEBC 01 20 A0 93&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MOVLS&nbsp;&nbsp; R2, #1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op2<br>
ram:A8F7AEC0 00 10 A0 93&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MOVLS&nbsp;&nbsp; R1, #0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op2<br>
ram:A8F7AEC4 00 10 C0 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; STRB&nbsp;&nbsp;&nbsp;&nbsp;R1, [R0]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Store to Memory<br>
ram:A8F7AEC8 02 00 A0 E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; MOV&nbsp;&nbsp;&nbsp;&nbsp; R0, R2&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op2<br>
ram:A8F7AECC 1E FF 2F E1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BX&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Branch to/from Thumb mode<br>
</div></div><br>
и там этого вагоны...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433508></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 09:48 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433508'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>ВоВа пишет: </b>ну кто хотел кода в раме?<div align="left"><script type="text/javascript">codeDivStart(66671)</script>ram:A8F7AE44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sub_A8F7AE44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; CODE XREF: sub_A8F77A5C+44p<br>
ram:A8F7AE44&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ; sub_A8F7863C+38p ...<br>
ram:A8F7AE44 00 00 50 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, #0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Set cond. codes on Op1 - Op2<br>
ram:A8F7AE48 1E FF 2F 01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BXEQ&nbsp;&nbsp;&nbsp;&nbsp;LR&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Branch to/from Thumb mode<br>
ram:A8F7AE4C 48 30 9F E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R3, =unk_8D9D4&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE50 00 10 93 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R1, [R3]&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE54 10 10 91 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R1, [R1,#0x10]&nbsp;&nbsp;; Load from Memory<br>
ram:A8F7AE58 00 00 81 E0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD&nbsp;&nbsp;&nbsp;&nbsp; R0, R1, R0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;; Rd = Op1 + Op2<br>
</div></div><br>
и там этого вагоны...</td></tr></table>
Код в раме является копией кода во флеше:<br>
<div align="left"><script type="text/javascript">codeDivStart(66671)</script>A13BA6AC 00 00 50 E3&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CMP&nbsp;&nbsp;&nbsp;&nbsp; R0, #0<br>
A13BA6B0 1E FF 2F 01&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; BXEQ&nbsp;&nbsp;&nbsp;&nbsp;LR<br>
A13BA6B4 48 30 9F E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R3, =0x8D9D4<br>
A13BA6B8 00 10 93 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R1, [R3]<br>
A13BA6BC 10 10 91 E5&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; LDR&nbsp;&nbsp;&nbsp;&nbsp; R1, [R1,#0x10]<br>
A13BA6C0 00 00 81 E0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ADD&nbsp;&nbsp;&nbsp;&nbsp; R0, R1, R0</div></div><br>
И, кстати, про код в раме мы уже проехали.<br>
Я допускаю вероятность того, что понадобится запускать раму, но не вижу необходимости делать только два режима (Функция, Адрес), если нужно как минимум три (Авто, Функция, Адрес).
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433511></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>ВоВа</b><small>&nbsp;(Телефонист-Надсмотрщик)</small>&nbsp;&nbsp;&nbsp;31.05.2006 в 09:58 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433511'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Код в раме является копией кода во флеше:</td></tr></table>ну этого никто не отрицает, вспомни обработчика swi ;)<br>
но скомпилен то он по адресам рамы и пускать его по этим адресам нужно.<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>И, кстати, про код в раме мы уже проехали.</td></tr></table>просто пример<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>если нужно как минимум три (Авто, Функция, Адрес)</td></tr></table>а я не вижу необходимости не в каких авторежимах...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433854></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;02.06.2006 в 07:06 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433854'>Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Aru55 пишет: </b>не совсем понял как можно принудительно заставить отдать адрес, и перейти на функцию >255</td></tr></table>
Мы долго спорили с Вовой, в итоге сделал таки по-своему:<br>
аргументом СВИ может быть любое число до 0xFFFF, но мы юзаем только до 0xFFF=4096.<br>
Также используются два старших бита аргумента сви:<br>
00 - авторежим<br>
01 - выполнить функцию<br>
10 - отдать содержимое<br>
11 - ничего не делать, что-нить сюда придумаем.<br>
<br>
Авторежим анализирует старший байт содержимого Библиотеки:<br>
FF - ничего не делать<br>
A8 - отдать содержимое<br>
00 - отдать содержимое<br>
иначе - выполнить функцию.<br>
<br>
SWI 199 зарезервировано для вызова функций >=256 из Тумбы.<br>
По нему вызывается СВИ, чей код лежит в полуслове сразу после СВИ 199.<br>
<br>
Примеры:<br>
SWI 0xA = SWI 0x400A = SWI 199, DW 0xA  = SWI 199, DW 0x400A - fopen<br>
SWI 0x800A = SWI 199, DW 0x800A - вернуть адрес fopen<br>
SWI 0xE4 = SWI 0x80E4  = SWI 199, DW 0xE4 = SWI 199, DW 0x80E4 - FreeRam<br>
SWI 0x40E4  = SWI 199, DW 0x40E4 - запустить функцию по адресу FreeRam<br>
<br>
Поскольку SWI AB юзается прошивкой S75, то в Библиотеке записал туда 0xFFFFFFFF. Авторежим просто игнорит такое сви.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433865></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;02.06.2006 в 08:01 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433865'>Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b><br>
Мы долго спорили с Вовой, в итоге сделал таки по-своему:<br>
...<br>
</td></tr></table>
<br>
Ну ладно. А зачем все в тумбе сделал и прыгаешь из арм в тумбу потом обратно? В арме слабо?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433871></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;02.06.2006 в 08:44 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433871'>Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>А зачем все в тумбе сделал и прыгаешь из арм в тумбу потом обратно? В арме слабо?</td></tr></table>А мне тумба больше нравится
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433874></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;02.06.2006 в 09:50 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433874'>Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>А зачем все в тумбе сделал и прыгаешь из арм в тумбу потом обратно? В арме слабо?</td></tr></table>А мне тумба больше нравится</td></tr></table>
<br>
Не ответ. Зачем лишние телодвижения? Тем более, что это довольно долгая песня, переключение из арм в тумбу и обратно, насколько я понимаю. Хотя и из 2 комманд состоит. Там же получается надо весь конвейер прочистить из-за перехода по адресу, да еще и определяемому перед самым bx. Так что переделай, плиз.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=433877></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;02.06.2006 в 10:02 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#433877'>Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>это довольно долгая песня, переключение из арм в тумбу и обратно, насколько я понимаю</td></tr></table>
Это тоже не аргумент. Может быть - да, а может быть - нет.<br>
Можешь цифрами доказать ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=434002></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;03.06.2006 в 06:18 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#434002'>Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>это довольно долгая песня, переключение из арм в тумбу и обратно, насколько я понимаю</td></tr></table>
Это тоже не аргумент. Может быть - да, а может быть - нет.<br>
Можешь цифрами доказать ?</td></tr></table>
<br>
Могу. Цифры там для ARMv5 - около 20 тактов. Плюс непаралелльная работа основного и Load/Store конвейера - еще минус сколько-то, расчету не поддается, т.к. не знаем, как там контроллер памяти организован. Так что можешь переделывать. Я понимаю, что ты скажешь - а ложил я на эти 50 тактов, но если так подходить, то можно оправдать любою кривость.
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=434455></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;06.06.2006 в 06:37 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#434455'>Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Rst7 пишет: </b>Я понимаю, что ты скажешь - а ложил я на эти 50 тактов, но если так подходить, то можно оправдать любою кривость.</td></tr></table>
Ага, так и скажу. ;)<br>
Но - таки переделаю на досуге, для совместимости с Вовиной библиотекой
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=439372></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Aru55</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;08.07.2006 в 20:01 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#439372'>Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Но - таки переделаю на досуге, для совместимости с Вовиной библиотекой</td></tr></table>
<br>
<small><font color=#999999>Уже месяц прошёл...;-)</font></small><br>
А как быть с функциями которые уже добавлены в "верхний сегмент" библиотеки (>255) ?  добавлять и в "нижний" или вызывать "верхний"?  А ещё уже есть некоторые дублирующиеся функции:<br>
<br>
SelectColor = GetPaletteAdrByColorIndex<br>
StrChrRev   = strrchr<br>
SetWindowMetrics = StoreXYWHtoRECT<br>
<br>
Ещё переписал в арм сви хук, может кто-нибудь посмотреть, правильно или нет?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=439388></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Rst7</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;09.07.2006 в 04:51 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#439388'>Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Aru55 пишет: </b><br>
<br>
А как быть с функциями которые уже добавлены в "верхний сегмент" библиотеки (>255) ?  добавлять и в "нижний" или вызывать "верхний"?  А ещё уже есть некоторые дублирующиеся функции:<br>
<br>
SelectColor = GetPaletteAdrByColorIndex<br>
StrChrRev   = strrchr<br>
SetWindowMetrics = StoreXYWHtoRECT<br>
</td></tr></table>
Kogda budete funkcii normal'no nazyvat', c opisaniem, togda i reshim vopros. <br>
<br>
<br>
<table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><br>
<br>
Ещё переписал в арм сви хук, может кто-нибудь посмотреть, правильно или нет?</td></tr></table>
<br>
У меня все давно сделано. И работает. Только с авкиевьским не совместим - никакож автоматики...
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=439403></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;09.07.2006 в 08:27 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#439403'>Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Aru55 пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b>Но - таки переделаю на досуге, для совместимости с Вовиной библиотекой</td></tr></table>
<small><font color=#999999>Уже месяц прошёл...;-)</font></small></td></tr></table>
А смысла нет переделывать.<br>
Умом я понимаю, что АРМ для этого дела лучше, чем тумба, оптимальнее.<br>
Но работает золотое правило: если все работает - не трожь.<br>
Был бы смысл перетачивать, если бы мы нашли компромисс с армовцами (Rst7 и Вова). А так - чего ради ? Просто чтоб сэкономить полторы микросекунды ?
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=439407></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>Aru55</b><small>&nbsp;(Телефонист)</small>&nbsp;&nbsp;&nbsp;09.07.2006 в 08:37 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#439407'>Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>avkiev пишет: </b><table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Aru55 пишет: </b><br><small><font color=#999999>вырезан оверквотинг</font></small><br>
<small><font color=#999999>Уже месяц прошёл...;-)</font></small></td></tr></table>
А смысла нет переделывать.<br>
Умом я понимаю, что АРМ для этого дела лучше, чем тумба, оптимальнее.<br>
Но работает золотое правило: если все работает - не трожь.<br>
Был бы смысл перетачивать, если бы мы нашли компромисс с армовцами (Rst7 и Вова). А так - чего ради ? Просто чтоб сэкономить полторы микросекунды ?</td></tr></table>
<br>
Ну не совсем, например на x65 ещё нет сви хука, а как ты сам любишь говорить  <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Если делать - то делать хорошо, универсально</td></tr></table> По моему делать сразу в арме будет лучше
    </td>
    </tr>
</table></td></tr></table>
            
 <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<a name=439416></a>     <!--DO NOT REMOVE the MsgID Entity!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0 bgcolor=#669933><tr><td>
<table width=100% border=0 cellspacing=1 cellpadding=4>
                
    <tr valign=top align=left> 
    <td width=100% valign=top bgcolor=#FFFFFF>
        <b>avkiev</b><small>&nbsp;(Признанный телефонист)</small>&nbsp;&nbsp;&nbsp;09.07.2006 в 09:05 
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table>
    <!--%MsgWrnIcon%--><!--%MsgIcon%-->
    <b><a style='color:black;' href='http://forum.siemens-club.org/viewtopic.php?TopicID=60641&page=3#439416'>Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: Re: swi</a></b><br><img src="/images/r.gif" width=1 height=4 alt=""><br>
    <table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#737373"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr></table><p>
        <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br><b>Aru55 пишет: </b>как ты сам любишь говорить  <table width='90%' cellspacing=1 cellpadding=3 border=0 align='center'><tr><td class='quote'><b>цитата:</b><br>Если делать - то делать хорошо, универсально</td></tr></table> По моему делать сразу в арме будет лучше</td></tr></table>
Тут - немножко другая ситуация.<br>
Мой тумбовый СВИ работает абсолютно нормально и правильно.<br>
В любой момент можно найти пару часов и переписать его в арме, для юзеров это будет абсолютно прозрачно и незаметно.<br>
Но сейчас, когда под мою эску еще нет несколько очень нужных мне патчей - я занимаюсь ими, а не экономией микросекунд, которые все равно никто не заметит...
    </td>
    </tr>
</table></td></tr></table>
            
<!--%LoopEnd%--> <!--DO NOT REMOVE THE LOOP ENTITIES!!!!!-->
<table width=100% border=0 cellspacing=0 cellpadding=0>
        <tr>
        <td valign=top align=left>&nbsp;<a href="http://forum.siemens-club.org/">SC-форум</a> : <a href="http://forum.siemens-club.org/viewboard.php?BoardID=37">Технический шпионаж. Сименс изнутри. </a> : swi</td>
        </tr>
<tr>
<td align=left valign=top>
Навигация: <select name=ForumJump onchange="if (this.options[this.selectedIndex].value == 0) window.open('http://forum.siemens-club.org','_top'); else {if (this.options[this.selectedIndex].value > 0) window.open('http://forum.siemens-club.org/viewboard.php?BoardID='+this.options[this.selectedIndex].value,'_top'); else {if (this.options[this.selectedIndex].value == -100) window.open('http://forum.siemens-club.org/viewbookmark.php','_top');}} "><option value=0>Начало</option><optgroup class='optiongroup' label="Мобильные телефоны"><option class='option' value=23>&nbsp;&nbsp;&nbsp;&nbsp;Старые модели Siemens </option><option class='option' value=20>&nbsp;&nbsp;&nbsp;&nbsp;Siemens Axx</option><option class='option' value=31>&nbsp;&nbsp;&nbsp;&nbsp;Siemens STxx</option><option class='option' value=7>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x25</option><option class='option' value=8>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x35</option><option class='option' value=25>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x40</option><option class='option' value=9>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x45</option><option class='option' value=17>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x50</option><option class='option' value=22>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x55 </option><option class='option' value=28>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x60</option><option class='option' value=29>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x65</option><option class='option' value=34>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x75</option><option class='option' value=38>&nbsp;&nbsp;&nbsp;&nbsp;BenQ-Siemens</option><option class='option' value=40>&nbsp;&nbsp;&nbsp;&nbsp;Siemens x75 на платформе NewSGold</option></optgroup><optgroup class='optiongroup' label="Модные телефоны-аксессуары"><option class='option' value=27>&nbsp;&nbsp;&nbsp;&nbsp;Xelibri X</option></optgroup><optgroup class='optiongroup' label="Смартфоны"><option class='option' value=26>&nbsp;&nbsp;&nbsp;&nbsp;Siemens SX</option></optgroup><optgroup class='optiongroup' label="Околотелефонные вопросы"><option class='option' value=1>&nbsp;&nbsp;&nbsp;&nbsp;Общие вопросы</option><option class='option' value=35>&nbsp;&nbsp;&nbsp;&nbsp;Программы</option><option class='option' value=36>&nbsp;&nbsp;&nbsp;&nbsp;Мидлеты (java-программы)</option><option class='option' value=11>&nbsp;&nbsp;&nbsp;&nbsp;Music, Logo & Java</option><option class='option' value=12>&nbsp;&nbsp;&nbsp;&nbsp;Аксессуары и запчасти</option><option class='option' value=21>&nbsp;&nbsp;&nbsp;&nbsp;Hard'n'Soft</option><option class='option' value=37 selected>&nbsp;&nbsp;&nbsp;&nbsp;Технический шпионаж. Сименс изнутри. </option><option class='option' value=33>&nbsp;&nbsp;&nbsp;&nbsp;Моббинг</option><option class='option' value=32>&nbsp;&nbsp;&nbsp;&nbsp;Сравнение мобильных телефонов</option></optgroup><optgroup class='optiongroup' label="Siemens-клуб"><option class='option' value=2>&nbsp;&nbsp;&nbsp;&nbsp;siemens-club.org</option><option class='option' value=13>&nbsp;&nbsp;&nbsp;&nbsp;Мобильный юмор. :)</option><option class='option' value=16>&nbsp;&nbsp;&nbsp;&nbsp;Оффтопик</option><option class='option' value=30>&nbsp;&nbsp;&nbsp;&nbsp;Обсуждение новостей.</option><option class='option' value=39>&nbsp;&nbsp;&nbsp;&nbsp;Корзина</option></optgroup><optgroup class='optiongroup' label="Барахолка"><option class='option' value=3>&nbsp;&nbsp;&nbsp;&nbsp;Купля/продажа</option><option class='option' value=14>&nbsp;&nbsp;&nbsp;&nbsp;Черный список.</option></optgroup><optgroup class='optiongroup' label="Операторы и Стандарты"><option class='option' value=4>&nbsp;&nbsp;&nbsp;&nbsp;ОпСоСы</option><option class='option' value=19>&nbsp;&nbsp;&nbsp;&nbsp;GPRS, WAP etc.</option></optgroup><optgroup class='optiongroup' label="DECT-телефоны"><option class='option' value=6>&nbsp;&nbsp;&nbsp;&nbsp;DECT</option></optgroup><optgroup class='optiongroup' label="Гостевая книга"><option class='option' value=5>&nbsp;&nbsp;&nbsp;&nbsp;Книга жалоб и предложений</option></optgroup><optgroup class='optiongroup' label="Личный кабинет"><option class='option' value=-100>&nbsp;&nbsp;&nbsp;&nbsp;Закладки</option></optgroup></select>&nbsp;<a href="http://forum.siemens-club.org/viewtopic.php?TopicID=60641">Полная версия темы</a>
</td>
</tr>
</table><table border=0 width=100%><tr align=center><td width=100%>
<script type="text/javascript"><!--
google_ad_client = "pub-5782312129702219";
google_ad_width = 728;
google_ad_height = 90;
google_ad_format = "728x90_as";
google_ad_type = "text_image";
google_ad_channel ="";
google_color_text = "666666";
google_color_link = "35766C";
google_color_url = "000000";
google_color_border = "669933";
google_color_bg = "EBF0DE";
//--></script>
<script type="text/javascript"
  src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</td></tr></table><div align=center>
<script type="text/javascript"><!--
google_ad_client = "pub-5782312129702219";
google_ad_width = 468;
google_ad_height = 60;
google_ad_format = "468x60_as_rimg";
google_cpa_choice = "CAAQ6PiT_AEaCKOMYdl4y0bCKLzv9IMB";
google_alternate_ad_url = "http://forum.siemens-club.org/google_adsense_script.php";
//--></script>
<script type="text/javascript" src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script>
</div>
<div align=right><br><form action=http://forum.siemens-club.org/member.php method=post>
<input type=hidden name=Action value=Logout>
<input type=hidden name=url value=http://forum.siemens-club.org/>
<input type=submit name=Submit value=Logout>
</form>
</div><table width=100% cellpadding=0 cellspacing=0 border=0><tr bgcolor="#669933"><td colspan=2 align=left nowrap valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr><tr bgcolor="#D6DEBC"><td width=100%><img src="/images/r.gif" width=1 height=10 alt=""></td><td align=right width=283 valign=top rowspan=3 nowrap bgcolor="#D6DEBC"><nobr>
<!--LiveInternet counter--><script language="JavaScript"><!--
document.write('<a href="http://www.liveinternet.ru/click" '+
'target=_blank><img src="http://counter.yadro.ru/hit?t21.2;r'+
escape(document.referrer)+((typeof(screen)=='undefined')?'':
';s'+screen.width+'*'+screen.height+'*'+(screen.colorDepth?
screen.colorDepth:screen.pixelDepth))+';u'+escape(document.URL)+
';'+Math.random()+
'" title="LiveInternet: показано число просмотров за 24 часа, посетителей за 24 часа и за сегодн\я" '+
'border=0 width=88 height=31></a>')//--></script><!--/LiveInternet-->
<!--begin of Top100 logo-->
<a href="http://top100.rambler.ru/top100/">
<img src="http://top100-images.rambler.ru/top100/banner-88x31-rambler-gray2.gif" alt="Rambler's Top100" width=88 height=31 border=0></a>
<!--end of Top100 logo --><!--Rating@Mail.ru COUNTEr--><script language="JavaScript" type="text/javascript"><!--
d=document;var a='';a+=';r='+escape(d.referrer)
js=10//--></script><script language="JavaScript1.1" type="text/javascript"><!--
a+=';j='+navigator.javaEnabled()
js=11//--></script><script language="JavaScript1.2" type="text/javascript"><!--
s=screen;a+=';s='+s.width+'*'+s.height
a+=';d='+(s.colorDepth?s.colorDepth:s.pixelDepth)
js=12//--></script><script language="JavaScript1.3" type="text/javascript"><!--
js=13//--></script><script language="JavaScript" type="text/javascript"><!--
d.write('<a href="http://top.mail.ru/jump?from=961624"'+
' target=_top><img src="http://dc.ca.be.a0.top.list.ru/counter'+
'?id=961624;t=51;js='+js+a+';rand='+Math.random()+
'" alt="Рейтинг@Mail.ru"'+' border=0 height=31 width=88/><\/a>')
if(11<js)d.write('<'+'!-- ')//--></script><noscript><a
target=_top href="http://top.mail.ru/jump?from=961624"><img
src="http://dc.ca.be.a0.top.list.ru/counter?js=na;id=961624;t=51"
border=0 height=31 width=88
alt="Новый Сименс Клуб"/></a></noscript><script language="JavaScript" type="text/javascript"><!--
if(11<js)d.write('--'+'>')//--></script><!--/COUNTER--></a>
<!-- AWLA -->
<script language="javascript">
sg_js="1.0";
sg_r=""+Math.random()+"&r="+escape(document.referrer)+"&pg="+escape(window.location.href);
document.cookie="sg=1; path=/";
sg_r+="&c="+(document.cookie?"1":"0");
if (self!=top) {fr=1;} else {fr=0;}
sg_r+="&fr="+fr;
mt=(new Date()).getTimezoneOffset();
sg_r+="&mt="+mt;
</script>
<script language="javascript1.1">
sg_js="1.1";
sg_r+="&j="+(navigator.javaEnabled()?"1":"0")
</script>
<script language="javascript1.2">
sg_js="1.2";
sg_r+="&wh="+screen.width+'x'+screen.height+"&px="+
(((navigator.appName.substring(0,3)=="Mic"))?
screen.colorDepth:screen.pixelDepth)
</script>
<script language="javascript1.3">sg_js="1.3"</script>
<script language="javascript">
sg_r+="&jv="+sg_js+"&js=1";
document.write("<a href='http://www.siemens-club.org'><img "+" src='http://www.siemens-club.org/statdir/stat.php?"+sg_r+"&' border=0 width=1 height=1></a>")
</script>
<noscript>
<a href="http://www.siemens-club.org">
<img src="http://www.siemens-club.org/statdir/stat.php?nojs=1" border=0></a>
</noscript>
<!-- /AWLA --></nobr><br></td></tr><tr bgcolor="#669933"><td align=left valign=top style="background: url(/images/bg1.gif) repeat-x;"><img src="/images/r.gif" width=1 height=1 alt=""><br></td></tr><tr>
<td align=left valign=top><img src="/images/r.gif" width=17 height=1 alt=""><span style="font-size: 8pt;">разработка: <a href="mailto:BigVovch@siemens-club.org">BigVovch</a>. <a href="http://forum.siemens-club.org/viewtopic.php?TopicID=39391">Администрация Клуба</a></span></td>
</tr></table>
<center></center><a href="http://top100.rambler.ru/top100/"><img src="http://counter.rambler.ru/top100.cnt?779115" alt="Настоящий Сименс Клуб" width=1 height=1 border=0></a></body>
</html>
 <!-- AdMedia Pop-under, Rich-media code START -->
 <script language=javascript><!--
 var RndNum4NoCash = Math.round(Math.random() * 1000000000);
 document.write('<sc' + 'ript language="JavaScript" src="http://ad.adriver.ru/cgi-bin/erle.cgi?sid=71783&target=top&bt=16&rnd=' + RndNum4NoCash + '"><\/sc' + 'ript>');
 //--></script>
 <!-- AdMedia Pop-under, Rich-media code END -->
 